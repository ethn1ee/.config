"use strict";var na=Object.create;var $e=Object.defineProperty;var sa=Object.getOwnPropertyDescriptor;var oa=Object.getOwnPropertyNames;var ia=Object.getPrototypeOf,aa=Object.prototype.hasOwnProperty;var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ca=(t,e)=>{for(var r in e)$e(t,r,{get:e[r],enumerable:!0})},Zr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oa(e))!aa.call(t,s)&&s!==r&&$e(t,s,{get:()=>e[s],enumerable:!(n=sa(e,s))||n.enumerable});return t};var q=(t,e,r)=>(r=t!=null?na(ia(t)):{},Zr(e||!t||!t.__esModule?$e(r,"default",{value:t,enumerable:!0}):r,t)),ha=t=>Zr($e({},"__esModule",{value:!0}),t);var Es=C((Gt,Jt)=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});function Zc(t){return t.encrypted}var Vt=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",s=typeof r.secureConnect=="function",o=typeof r.close=="function",i=()=>{n&&r.connect(),Zc(t)&&s&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),o&&t.once("close",r.close)};t.writable&&!t.connecting?i():t.connecting?t.once("connect",i):t.destroyed&&o&&r.close(t._hadError)};Gt.default=Vt;Jt.exports=Vt;Jt.exports.default=Vt});var Gs=C((Ud,Vs)=>{"use strict";var Sh=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Th=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ah=new Set([500,502,503,504]),Ch={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},kh={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function ee(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Rh(t){return t?Ah.has(t.status):!0}function tr(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[s,o]=n.split(/=/,2);e[s.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function Oh(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}Vs.exports=class{constructor(e,r,{shared:n,cacheHeuristic:s,immutableMinTimeToLive:o,ignoreCargoCult:i,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=s!==void 0?s:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=tr(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=tr(e.headers["cache-control"]),i&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Oh(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Th.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Sh.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=tr(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Ch[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let s of n)delete r[s]}if(r.warning){let n=r.warning.split(/,/).filter(s=>!/^\s*1[0-9][0-9]/.test(s));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return ee(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return ee(this._rescc["s-maxage"])}if(this._rescc["max-age"])return ee(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+ee(this._rescc["stale-if-error"]),n=e+ee(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+ee(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+ee(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let s=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));s.length?r["if-none-match"]=s.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Rh(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let s={};for(let i in this._resHeaders)s[i]=i in r.headers&&!kh[i]?r.headers[i]:this._resHeaders[i];let o=Object.assign({},r,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Ks=C(rr=>{rr.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var s=!0;for(var o in e){var i=typeof e[o]=="function"||!n&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!i&&(s||(r+=","),s=!1,n?e[o]==null?r+="null":r+=t(e[o]):e[o]!==void 0&&(r+=t(o)+":"+t(e[o])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};rr.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var Zs=C((Md,Xs)=>{"use strict";var Ph=require("events"),Qs=Ks(),Ih=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},Ys=["sqlite","postgres","mysql","mongo","redis","tiered"],nr=class extends Ph{constructor(e,{emitErrors:r=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:Qs.stringify,deserialize:Qs.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let o={...this.opts};this.opts.store=Ih(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let s=o=>async function*(){for await(let[i,a]of typeof o=="function"?o(this.opts.store.namespace):o){let h=await this.opts.deserialize(a);if(!(this.opts.store.namespace&&!i.includes(this.opts.store.namespace))){if(typeof h.expires=="number"&&Date.now()>h.expires){this.delete(i);continue}yield[this._getKeyUnprefix(i),h.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return Ys.includes(this.opts.store.opts.dialect)||Ys.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:n}=this.opts,s=Array.isArray(e),o=s?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(s&&n.getMany===void 0){let i=[];for(let a of o)i.push(Promise.resolve().then(()=>n.get(a)).then(h=>typeof h=="string"?this.opts.deserialize(h):this.opts.compression?this.opts.deserialize(h):h).then(h=>{if(h!=null)return typeof h.expires=="number"&&Date.now()>h.expires?this.delete(a).then(()=>{}):r&&r.raw?h:h.value}));return Promise.allSettled(i).then(a=>{let h=[];for(let u of a)h.push(u.value);return h})}return Promise.resolve().then(()=>s?n.getMany(o):n.get(o)).then(i=>typeof i=="string"?this.opts.deserialize(i):this.opts.compression?this.opts.deserialize(i):i).then(i=>{if(i!=null)return s?i.map((a,h)=>{if(typeof a=="string"&&(a=this.opts.deserialize(a)),a!=null){if(typeof a.expires=="number"&&Date.now()>a.expires){this.delete(e[h]).then(()=>{});return}return r&&r.raw?a:a.value}}):typeof i.expires=="number"&&Date.now()>i.expires?this.delete(e).then(()=>{}):r&&r.raw?i:i.value})}set(e,r,n){let s=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let i=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:i},this.opts.serialize(r)}).then(i=>o.set(s,i,n)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let s=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let o=[];for(let i of s)o.push(r.delete(i));return Promise.allSettled(o).then(i=>i.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(s))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(r):await n.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};Xs.exports=nr});var oo=C((Xd,so)=>{"use strict";var Hh=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];so.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(Hh)),n={};for(let s of r)s in e||(n[s]={get(){let o=t[s];return typeof o=="function"?o.bind(t):o},set(o){t[s]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var ao=C((Zd,io)=>{"use strict";var{Transform:Uh,PassThrough:Bh}=require("stream"),ar=require("zlib"),Dh=oo();io.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof ar.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,s=new Uh({transform(a,h,u){n=!1,u(null,a)},flush(a){a()}}),o=new Bh({autoDestroy:!1,destroy(a,h){t.destroy(),h(a)}}),i=r?ar.createBrotliDecompress():ar.createUnzip();return i.once("error",a=>{if(n&&!t.readable){o.end();return}o.destroy(a)}),Dh(t,o),t.pipe(s).pipe(i).pipe(o),o}});var Sr=C((Ul,Do)=>{"use strict";var Er=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,s]of this.oldCache.entries())this.onEviction(n,s);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};Do.exports=Er});var Tr=C((Bl,vo)=>{"use strict";vo.exports=t=>{if(t.listenerCount("error")!==0)return t;t.__destroy=t._destroy,t._destroy=(...r)=>{let n=r.pop();t.__destroy(...r,async s=>{await Promise.resolve(),n(s)})};let e=r=>{Promise.resolve().then(()=>{t.emit("error",r)})};return t.once("error",e),Promise.resolve().then(()=>{t.off("error",e)}),t}});var re=C((Dl,Vo)=>{"use strict";var{URL:zo}=require("url"),yf=require("events"),gf=require("tls"),wf=require("http2"),bf=Sr(),_f=Tr(),H=Symbol("currentStreamCount"),Mo=Symbol("request"),U=Symbol("cachedOriginSet"),Z=Symbol("gracefullyClosing"),dt=Symbol("length"),Fo=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"],xf=(t,e,r)=>{let n=0,s=t.length;for(;n<s;){let o=n+s>>>1;r(t[o],e)?n=o+1:s=o}return n},Ef=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,Ar=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];n[U].length>0&&n[U].length<e[U].length&&n[U].every(s=>e[U].includes(s))&&n[H]+e[H]<=e.remoteSettings.maxConcurrentStreams&&Wo(n)}},$o=(t,e)=>{for(let r=0;r<t.length;r++){let n=t[r];if(e[U].length>0&&e[U].length<n[U].length&&e[U].every(s=>n[U].includes(s))&&e[H]+n[H]<=n.remoteSettings.maxConcurrentStreams)return Wo(e),!0}return!1},Wo=t=>{t[Z]=!0,t[H]===0&&t.close()},me=class t extends yf{constructor({timeout:e=0,maxSessions:r=Number.POSITIVE_INFINITY,maxEmptySessions:n=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxEmptySessions=n,this._emptySessionCount=0,this._sessionCount=0,this.settings={enablePush:!1,initialWindowSize:1024*1024*32},this.tlsSessionCache=new bf({maxSize:s})}get protocol(){return"https:"}normalizeOptions(e){let r="";for(let n=0;n<Fo.length;n++){let s=Fo[n];r+=":",e&&e[s]!==void 0&&(r+=e[s])}return r}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(let e in this.queue)for(let r in this.queue[e]){let n=this.queue[e][r];n.completed||(n.completed=!0,n())}}_isBetterSession(e,r){return e>r}_accept(e,r,n,s){let o=0;for(;o<r.length&&e[H]<e.remoteSettings.maxConcurrentStreams;)r[o].resolve(e),o++;r.splice(0,o),r.length>0&&(this.getSession(n,s,r),r.length=0)}getSession(e,r,n){return new Promise((s,o)=>{Array.isArray(n)&&n.length>0?(n=[...n],s()):n=[{resolve:s,reject:o}];try{if(typeof e=="string")e=new zo(e);else if(!(e instanceof zo))throw new TypeError("The `origin` argument needs to be a string or an URL object");if(r){let{servername:m}=r,{hostname:w}=e;if(m&&w!==m)throw new Error(`Origin ${w} differs from servername ${m}`)}}catch(m){for(let w=0;w<n.length;w++)n[w].reject(m);return}let i=this.normalizeOptions(r),a=e.origin;if(i in this.sessions){let m=this.sessions[i],w=-1,p=-1,y;for(let b=0;b<m.length;b++){let f=m[b],E=f.remoteSettings.maxConcurrentStreams;if(E<w)break;if(!f[U].includes(a))continue;let g=f[H];g>=E||f[Z]||f.destroyed||(y||(w=E),this._isBetterSession(g,p)&&(y=f,p=g))}if(y){this._accept(y,n,a,r);return}}if(i in this.queue){if(a in this.queue[i]){this.queue[i][a].listeners.push(...n);return}}else this.queue[i]={[dt]:0};let h=()=>{i in this.queue&&this.queue[i][a]===u&&(delete this.queue[i][a],--this.queue[i][dt]===0&&delete this.queue[i])},u=async()=>{this._sessionCount++;let m=`${a}:${i}`,w=!1,p;try{let y={...r};y.settings===void 0&&(y.settings=this.settings),y.session===void 0&&(y.session=this.tlsSessionCache.get(m)),p=await(y.createConnection||this.createConnection).call(this,e,y),y.createConnection=()=>p;let f=wf.connect(e,y);f[H]=0,f[Z]=!1;let E=()=>{let{socket:_}=f,T;return _.servername===!1?(_.servername=_.remoteAddress,T=f.originSet,_.servername=!1):T=f.originSet,T},g=()=>f[H]<f.remoteSettings.maxConcurrentStreams;f.socket.once("session",_=>{this.tlsSessionCache.set(m,_)}),f.once("error",_=>{for(let T=0;T<n.length;T++)n[T].reject(_);this.tlsSessionCache.delete(m)}),f.setTimeout(this.timeout,()=>{f.destroy()}),f.once("close",()=>{if(this._sessionCount--,w){this._emptySessionCount--;let _=this.sessions[i];_.length===1?delete this.sessions[i]:_.splice(_.indexOf(f),1)}else{h();let _=new Error("Session closed without receiving a SETTINGS frame");_.code="HTTP2WRAPPER_NOSETTINGS";for(let T=0;T<n.length;T++)n[T].reject(_)}this._processQueue()});let S=()=>{let _=this.queue[i];if(!_)return;let T=f[U];for(let P=0;P<T.length;P++){let j=T[P];if(j in _){let{listeners:k,completed:$}=_[j],W=0;for(;W<k.length&&g();)k[W].resolve(f),W++;if(_[j].listeners.splice(0,W),_[j].listeners.length===0&&!$&&(delete _[j],--_[dt]===0)){delete this.queue[i];break}if(!g())break}}};f.on("origin",()=>{f[U]=E()||[],f[Z]=!1,$o(this.sessions[i],f),!(f[Z]||!g())&&(S(),g()&&Ar(this.sessions[i],f))}),f.once("remoteSettings",()=>{if(u.destroyed){let _=new Error("Agent has been destroyed");for(let T=0;T<n.length;T++)n[T].reject(_);f.destroy();return}if(f.setLocalWindowSize&&f.setLocalWindowSize(1024*1024*4),f[U]=E()||[],f.socket.encrypted){let _=f[U][0];if(_!==a){let T=new Error(`Requested origin ${a} does not match server ${_}`);for(let P=0;P<n.length;P++)n[P].reject(T);f.destroy();return}}h();{let _=this.sessions;if(i in _){let T=_[i];T.splice(xf(T,f,Ef),0,f)}else _[i]=[f]}w=!0,this._emptySessionCount++,this.emit("session",f),this._accept(f,n,a,r),f[H]===0&&this._emptySessionCount>this.maxEmptySessions&&this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions),f.on("remoteSettings",()=>{g()&&(S(),g()&&Ar(this.sessions[i],f))})}),f[Mo]=f.request,f.request=(_,T)=>{if(f[Z])throw new Error("The session is gracefully closing. No new streams are allowed.");let P=f[Mo](_,T);return f.ref(),f[H]++===0&&this._emptySessionCount--,P.once("close",()=>{if(--f[H]===0&&(this._emptySessionCount++,f.unref(),this._emptySessionCount>this.maxEmptySessions||f[Z])){f.close();return}f.destroyed||f.closed||g()&&!$o(this.sessions[i],f)&&(Ar(this.sessions[i],f),S(),f[H]===0&&this._processQueue())}),P}}catch(y){h(),this._sessionCount--;for(let b=0;b<n.length;b++)n[b].reject(y)}};u.listeners=n,u.completed=!1,u.destroyed=!1,this.queue[i][a]=u,this.queue[i][dt]++,this._processQueue()})}request(e,r,n,s){return new Promise((o,i)=>{this.getSession(e,r,[{reject:i,resolve:a=>{try{let h=a.request(n,s);_f(h),o(h)}catch(h){i(h)}}}])})}async createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,s=e.hostname;typeof r.servername>"u"&&(r.servername=s);let o=gf.connect(n,s,r);return r.socket&&(o._peername={family:void 0,address:void 0,port:n}),o}closeEmptySessions(e=Number.POSITIVE_INFINITY){let r=0,{sessions:n}=this;for(let s in n){let o=n[s];for(let i=0;i<o.length;i++){let a=o[i];if(a[H]===0&&(r++,a.close(),r>=e))return r}}return r}destroy(e){let{sessions:r,queue:n}=this;for(let s in r){let o=r[s];for(let i=0;i<o.length;i++)o[i].destroy(e)}for(let s in n){let o=n[s];for(let i in o)o[i].destroyed=!0}this.queue={},this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}};me.kCurrentStreamCount=H;me.kGracefullyClosing=Z;Vo.exports={Agent:me,globalAgent:new me}});var kr=C((vl,Go)=>{"use strict";var{Readable:Sf}=require("stream"),Cr=class extends Sf{constructor(e,r){super({emitClose:!1,autoDestroy:!0,highWaterMark:r}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this._dumped=!1}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,r){this.readableEnded||(this.aborted=!0),r(),this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};Go.exports=Cr});var Ko=C((zl,Jo)=>{"use strict";Jo.exports=(t,e,r)=>{for(let n of r)t.on(n,(...s)=>e.emit(n,...s))}});var He=C((Fl,Qo)=>{"use strict";var ne=(t,e,r)=>{Qo.exports[e]=class extends t{constructor(...s){super(typeof r=="string"?r:r(s)),this.name=`${super.name} [${e}]`,this.code=e}}};ne(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});ne(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);ne(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);ne(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);ne(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);ne(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`);ne(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")});var Xo=C(($l,Yo)=>{"use strict";Yo.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Rr=C((Wl,Zo)=>{"use strict";var{ERR_INVALID_HTTP_TOKEN:Tf}=He(),Af=Xo(),Cf=/^[\^`\-\w!#$%&*+.|~]+$/;Zo.exports=t=>{if(typeof t!="string"||!Cf.test(t)&&!Af(t))throw new Tf("Header name",t)}});var Or=C((Vl,ei)=>{"use strict";var{ERR_HTTP_INVALID_HEADER_VALUE:kf,ERR_INVALID_CHAR:Rf}=He(),Of=/[^\t\u0020-\u007E\u0080-\u00FF]/;ei.exports=(t,e)=>{if(typeof e>"u")throw new kf(e,t);if(Of.test(e))throw new Rf("header content",t)}});var ni=C((Gl,ri)=>{"use strict";var{ERR_HTTP2_NO_SOCKET_MANIPULATION:ti}=He(),Pf={has(t,e){let r=t.session===void 0?t:t.session.socket;return e in t||e in r},get(t,e){switch(e){case"on":case"once":case"end":case"emit":case"destroy":return t[e].bind(t);case"writable":case"destroyed":return t[e];case"readable":return t.destroyed?!1:t.readable;case"setTimeout":{let{session:r}=t;return r!==void 0?r.setTimeout.bind(r):t.setTimeout.bind(t)}case"write":case"read":case"pause":case"resume":throw new ti;default:{let r=t.session===void 0?t:t.session.socket,n=r[e];return typeof n=="function"?n.bind(r):n}}},getPrototypeOf(t){return t.session!==void 0?Reflect.getPrototypeOf(t.session.socket):Reflect.getPrototypeOf(t)},set(t,e,r){switch(e){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":return t[e]=r,!0;case"setTimeout":{let{session:n}=t;return n===void 0?t.setTimeout=r:n.setTimeout=r,!0}case"write":case"read":case"pause":case"resume":throw new ti;default:{let n=t.session===void 0?t:t.session.socket;return n[e]=r,!0}}}};ri.exports=Pf});var Lr=C((Jl,hi)=>{"use strict";var{URL:Pr,urlToHttpOptions:si}=require("url"),If=require("http2"),{Writable:Nf}=require("stream"),{Agent:Lf,globalAgent:jf}=re(),qf=kr(),Hf=Ko(),{ERR_INVALID_ARG_TYPE:lt,ERR_INVALID_PROTOCOL:Uf,ERR_HTTP_HEADERS_SENT:oi}=He(),Bf=Rr(),Df=Or(),vf=ni(),{HTTP2_HEADER_STATUS:ii,HTTP2_HEADER_METHOD:ai,HTTP2_HEADER_PATH:ci,HTTP2_HEADER_AUTHORITY:Ue,HTTP2_METHOD_CONNECT:zf}=If.constants,L=Symbol("headers"),ye=Symbol("origin"),Be=Symbol("session"),Ir=Symbol("options"),pt=Symbol("flushedHeaders"),ge=Symbol("jobs"),De=Symbol("pendingAgentPromise"),Nr=class extends Nf{constructor(e,r,n){if(super({autoDestroy:!1,emitClose:!1}),typeof e=="string"?e=si(new Pr(e)):e instanceof Pr?e=si(e):e={...e},typeof r=="function"||r===void 0?(n=r,r=e):r=Object.assign(e,r),r.h2session){if(this[Be]=r.h2session,this[Be].destroyed)throw new Error("The session has been closed already");this.protocol=this[Be].socket.encrypted?"https:":"http:"}else if(r.agent===!1)this.agent=new Lf({maxEmptySessions:0});else if(typeof r.agent>"u"||r.agent===null)this.agent=jf;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new lt("options.agent",["http2wrapper.Agent-like Object","undefined","false"],r.agent);if(this.agent&&(this.protocol=this.agent.protocol),r.protocol&&r.protocol!==this.protocol)throw new Uf(r.protocol,this.protocol);r.port||(r.port=r.defaultPort||this.agent&&this.agent.defaultPort||443),r.host=r.hostname||r.host||"localhost",delete r.hostname;let{timeout:s}=r;r.timeout=void 0,this[L]=Object.create(null),this[ge]=[],this[De]=void 0,this.socket=null,this.connection=null,this.method=r.method||"GET",this.method==="CONNECT"&&(r.path==="/"||r.path===void 0)||(this.path=r.path),this.res=null,this.aborted=!1,this.reusedSocket=!1;let{headers:o}=r;if(o)for(let a in o)this.setHeader(a,o[a]);r.auth&&!("authorization"in this[L])&&(this[L].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Ir]=r,this[ye]=new Pr(`${this.protocol}//${r.servername||r.host}:${r.port}`);let i=r._reuseSocket;i&&(r.createConnection=(...a)=>i.destroyed?this.agent.createConnection(...a):i,this.agent.getSession(this[ye],this[Ir]).catch(()=>{})),s&&this.setTimeout(s),n&&this.once("response",n),this[pt]=!1}get method(){return this[L][ai]}set method(e){e&&(this[L][ai]=e.toUpperCase())}get path(){let e=this.method==="CONNECT"?Ue:ci;return this[L][e]}set path(e){if(e){let r=this.method==="CONNECT"?Ue:ci;this[L][r]=e}}get host(){return this[ye].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let s=()=>this._request.write(e,r,n);this._request?s():this[ge].push(s)}_final(e){this.flushHeaders();let r=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};this._request?r():this[ge].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}async _destroy(e,r){this.res&&this.res._dump(),this._request?this._request.destroy():process.nextTick(()=>{this.emit("close")});try{await this[De]}catch(n){this.aborted&&(e=n)}r(e)}async flushHeaders(){if(this[pt]||this.destroyed)return;this[pt]=!0;let e=this.method===zf,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||Hf(n,this,["timeout","continue"]),n.once("error",o=>{this.destroy(o)}),n.once("aborted",()=>{let{res:o}=this;o?(o.aborted=!0,o.emit("aborted"),o.destroy()):this.destroy(new Error("The server aborted the HTTP/2 stream"))});let s=(o,i,a)=>{let h=new qf(this.socket,n.readableHighWaterMark);this.res=h,h.url=`${this[ye].origin}${this.path}`,h.req=this,h.statusCode=o[ii],h.headers=o,h.rawHeaders=a,h.once("end",()=>{h.complete=!0,h.socket=null,h.connection=null}),e?(h.upgrade=!0,this.emit("connect",h,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",u=>{!h._dumped&&!h.push(u)&&n.pause()}),n.once("end",()=>{this.aborted||h.push(null)}),this.emit("response",h)||h._dump())};n.once("response",s),n.once("headers",o=>this.emit("information",{statusCode:o[ii]})),n.once("trailers",(o,i,a)=>{let{res:h}=this;if(h===null){s(o,i,a);return}h.trailers=o,h.rawTrailers=a}),n.once("close",()=>{let{aborted:o,res:i}=this;if(i){o&&(i.aborted=!0,i.emit("aborted"),i.destroy());let a=()=>{i.emit("close"),this.destroy(),this.emit("close")};i.readable?i.once("end",a):a();return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated")),this.emit("close");return}this.destroy(),this.emit("close")}),this.socket=new Proxy(n,vf);for(let o of this[ge])o();this[ge].length=0,this.emit("socket",this.socket)};if(!(Ue in this[L])&&!e&&(this[L][Ue]=this[ye].host),this[Be])try{r(this[Be].request(this[L]))}catch(n){this.destroy(n)}else{this.reusedSocket=!0;try{let n=this.agent.request(this[ye],this[Ir],this[L]);this[De]=n,r(await n),this[De]=!1}catch(n){this[De]=!1,this.destroy(n)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[L])}hasHeader(e){if(typeof e!="string")throw new lt("name","string",e);return!!this[L][e.toLowerCase()]}getHeader(e){if(typeof e!="string")throw new lt("name","string",e);return this[L][e.toLowerCase()]}get headersSent(){return this[pt]}removeHeader(e){if(typeof e!="string")throw new lt("name","string",e);if(this.headersSent)throw new oi("remove");delete this[L][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new oi("set");Bf(e),Df(e,r);let n=e.toLowerCase();if(n==="connection"){if(r.toLowerCase()==="keep-alive")return;throw new Error(`Invalid 'connection' header: ${r}`)}n==="host"&&this.method==="CONNECT"?this[L][Ue]=r:this[L][n]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[ge].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};hi.exports=Nr});var ui=C((Kl,fi)=>{"use strict";var Mf=require("tls");fi.exports=(t={},e=Mf.connect)=>new Promise((r,n)=>{let s=!1,o,i=async()=>{await h,o.off("timeout",a),o.off("error",n),t.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:s}),s&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:s}))},a=async()=>{s=!0,i()},h=(async()=>{try{o=await e(t,i),o.on("error",n),o.once("timeout",a)}catch(u){n(u)}})()})});var li=C((Ql,di)=>{"use strict";var{isIP:Ff}=require("net"),$f=require("assert"),Wf=t=>{if(t[0]==="["){let r=t.indexOf("]");return $f(r!==-1),t.slice(1,r)}let e=t.indexOf(":");return e===-1?t:t.slice(0,e)};di.exports=t=>{let e=Wf(t);return Ff(e)?"":e}});var xi=C((Yl,ve)=>{"use strict";var{URL:pi,urlToHttpOptions:mi}=require("url"),yi=require("http"),jr=require("https"),Vf=ui(),Gf=Sr(),{Agent:Jf,globalAgent:Kf}=re(),Qf=Lr(),Yf=li(),gi=Tr(),wi=new Gf({maxSize:100}),Xf=new Map,Zf=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let s=()=>{t.removeSocket(e,r)};e.on("close",s);let o=()=>{let{freeSockets:a}=t;for(let h of Object.values(a))if(h.includes(e)){e.destroy();return}};e.on("timeout",o);let i=()=>{t.removeSocket(e,r),e.off("close",s),e.off("free",n),e.off("timeout",o),e.off("agentRemove",i)};e.on("agentRemove",i),t.emit("free",e,r)},bi=(t,e=new Map,r=void 0)=>async n=>{let s=`${n.host}:${n.port}:${n.ALPNProtocols.sort()}`;if(!t.has(s)){if(e.has(s))return{alpnProtocol:(await e.get(s)).alpnProtocol};let{path:o}=n;n.path=n.socketPath;let i=Vf(n,r);e.set(s,i);try{let a=await i;return t.set(s,a.alpnProtocol),e.delete(s),n.path=o,a}catch(a){throw e.delete(s),n.path=o,a}}return{alpnProtocol:t.get(s)}},_i=bi(wi,Xf);ve.exports=async(t,e,r)=>{if(typeof t=="string"?t=mi(new pi(t)):t instanceof pi?t=mi(t):t={...t},typeof e=="function"||e===void 0?(r=e,e=t):e=Object.assign(t,e),e.ALPNProtocols=e.ALPNProtocols||["h2","http/1.1"],!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Yf(e.headers&&e.headers.host||e.host),e.port=e.port||(n?443:80),e._defaultAgent=n?jr.globalAgent:yi.globalAgent;let s=e.resolveProtocol||_i,{agent:o}=e;if(o!==void 0&&o!==!1&&o.constructor.name!=="Object")throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties");if(n){e.resolveSocket=!0;let{socket:i,alpnProtocol:a,timeout:h}=await s(e);if(h){i&&i.destroy();let m=new Error(`Timed out resolving ALPN: ${e.timeout} ms`);throw m.code="ETIMEDOUT",m.ms=e.timeout,m}i&&e.createConnection&&(i.destroy(),i=void 0),delete e.resolveSocket;let u=a==="h2";if(o&&(o=u?o.http2:o.https,e.agent=o),o===void 0&&(o=u?Kf:jr.globalAgent),i)if(o===!1)i.destroy();else{let m=(u?Jf:jr.Agent).prototype.createConnection;o.createConnection===m?u?e._reuseSocket=i:Zf(o,i,e):i.destroy()}if(u)return gi(new Qf(e,r))}else o&&(e.agent=o.http);return e.headers&&(e.headers={...e.headers},e.headers[":authority"]&&(e.headers.host||(e.headers.host=e.headers[":authority"]),delete e.headers[":authority"]),delete e.headers[":method"],delete e.headers[":scheme"],delete e.headers[":path"]),gi(yi.request(e,r))};ve.exports.protocolCache=wi;ve.exports.resolveProtocol=_i;ve.exports.createResolveProtocol=bi});var qr=C((Xl,Ei)=>{"use strict";var eu=require("stream"),tu=require("tls"),ru=new tu.TLSSocket(new eu.PassThrough)._handle._parentWrap.constructor;Ei.exports=ru});var Ur=C((Zl,Si)=>{"use strict";var Hr=class extends Error{constructor(e,r=""){super(`The proxy server rejected the request with status code ${e} (${r||"empty status message"})`),this.statusCode=e,this.statusMessage=r}};Si.exports=Hr});var Ai=C((ep,Ti)=>{"use strict";var nu=(t,e,r)=>{if(!r.some(s=>typeof s==="string"?typeof e===s:e instanceof s)){let s=r.map(o=>typeof o=="string"?o:o.name);throw new TypeError(`Expected '${t}' to be a type of ${s.join(" or ")}, got ${typeof e}`)}};Ti.exports=nu});var Br=C((tp,ki)=>{"use strict";var{URL:Ci}=require("url"),mt=Ai();ki.exports=(t,e)=>{mt("proxyOptions",e,["object"]),mt("proxyOptions.headers",e.headers,["object","undefined"]),mt("proxyOptions.raw",e.raw,["boolean","undefined"]),mt("proxyOptions.url",e.url,[Ci,"string"]);let r=new Ci(e.url);t.proxyOptions={raw:!0,...e,headers:{...e.headers},url:r}}});var yt=C((rp,Ri)=>{"use strict";Ri.exports=t=>{let{username:e,password:r}=t.proxyOptions.url;if(e||r){let n=`${e}:${r}`,s=`Basic ${Buffer.from(n).toString("base64")}`;return{"proxy-authorization":s,authorization:s}}return{}}});var Li=C((np,Ni)=>{"use strict";var su=require("tls"),ou=require("http"),Oi=require("https"),iu=qr(),{globalAgent:au}=re(),cu=Ur(),Pi=Br(),hu=yt(),Ii=(t,e,r)=>{(async()=>{try{let{proxyOptions:n}=t,{url:s,headers:o,raw:i}=n,a=await au.request(s,n,{...hu(t),...o,":method":"CONNECT",":authority":`${e.host}:${e.port}`});a.once("error",r),a.once("response",h=>{let u=h[":status"];if(u!==200){r(new cu(u,""));return}let m=t instanceof Oi.Agent;if(i&&m){e.socket=a;let p=su.connect(e);p.once("close",()=>{a.destroy()}),r(null,p);return}let w=new iu(a);w.encrypted=!1,w._handle.getpeername=p=>{p.family=void 0,p.address=void 0,p.port=void 0},r(null,w)})}catch(n){r(n)}})()},Dr=class extends ou.Agent{constructor(e){super(e),Pi(this,e.proxyOptions)}createConnection(e,r){Ii(this,e,r)}},vr=class extends Oi.Agent{constructor(e){super(e),Pi(this,e.proxyOptions)}createConnection(e,r){Ii(this,e,r)}};Ni.exports={HttpOverHttp2:Dr,HttpsOverHttp2:vr}});var Mr=C((sp,ji)=>{"use strict";var{Agent:fu}=re(),uu=qr(),du=Ur(),lu=Br(),zr=class extends fu{constructor(e){super(e),lu(this,e.proxyOptions)}async createConnection(e,r){let n=`${e.hostname}:${e.port||443}`,[s,o,i]=await this._getProxyStream(n);if(o!==200)throw new du(o,i);if(this.proxyOptions.raw)r.socket=s;else{let a=new uu(s);return a.encrypted=!1,a._handle.getpeername=h=>{h.family=void 0,h.address=void 0,h.port=void 0},a}return super.createConnection(e,r)}};ji.exports=zr});var Hi=C((op,qi)=>{"use strict";var{globalAgent:pu}=re(),mu=Mr(),yu=yt(),gu=t=>new Promise((e,r)=>{t.once("error",r),t.once("response",n=>{t.off("error",r),e(n[":status"])})}),Fr=class extends mu{async _getProxyStream(e){let{proxyOptions:r}=this,n={...yu(this),...r.headers,":method":"CONNECT",":authority":e},s=await pu.request(r.url,r,n),o=await gu(s);return[s,o,""]}};qi.exports=Fr});var Bi=C((ip,Ui)=>{"use strict";var wu=require("http"),bu=require("https"),_u=Mr(),xu=yt(),Eu=t=>new Promise((e,r)=>{let n=(s,o,i)=>{o.unshift(i),t.off("error",r),e([o,s.statusCode,s.statusMessage])};t.once("error",r),t.once("connect",n)}),gt=class extends _u{async _getProxyStream(e){let{proxyOptions:r}=this,{url:n,headers:s}=this.proxyOptions,i=(n.protocol==="https:"?bu:wu).request({...r,hostname:n.hostname,port:n.port,path:e,headers:{...xu(this),...s,host:e},method:"CONNECT"}).end();return Eu(i)}};Ui.exports={Http2OverHttp:gt,Http2OverHttps:gt}});var vi=C((ap,Di)=>{"use strict";var Su=require("http2"),{Agent:Tu,globalAgent:Au}=re(),$r=Lr(),Cu=kr(),ku=xi(),{HttpOverHttp2:Ru,HttpsOverHttp2:Ou}=Li(),Pu=Hi(),{Http2OverHttp:Iu,Http2OverHttps:Nu}=Bi(),Lu=Rr(),ju=Or(),qu=(t,e,r)=>new $r(t,e,r),Hu=(t,e,r)=>{let n=new $r(t,e,r);return n.end(),n};Di.exports={...Su,ClientRequest:$r,IncomingMessage:Cu,Agent:Tu,globalAgent:Au,request:qu,get:Hu,auto:ku,proxies:{HttpOverHttp2:Ru,HttpsOverHttp2:Ou,Http2OverHttp2:Pu,Http2OverHttp:Iu,Http2OverHttps:Nu},validateHeaderName:Lu,validateHeaderValue:ju}});var rd={};ca(rd,{default:()=>ta});module.exports=ha(rd);var D=require("react"),x=require("@raycast/api");var an=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function fa(t){return an.includes(t)}var cn=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...an];function ua(t){return cn.includes(t)}var hn=["null","undefined","string","number","bigint","boolean","symbol"];function da(t){return hn.includes(t)}var sd=["positive number","negative number","Class","string with a number","null or undefined","Iterable","AsyncIterable","native Promise","EnumCase","string with a URL","truthy","falsy","primitive","integer","plain object","TypedArray","array-like","tuple-like","Node.js Stream","infinite number","empty array","non-empty array","empty string","empty string or whitespace","non-empty string","non-empty string and not whitespace","empty object","non-empty object","empty set","non-empty set","empty map","non-empty map","PropertyKey","even integer","odd integer","T","in range","predicate returns truthy for any value","predicate returns truthy for all values","valid Date","valid length","whitespace string",...cn,...hn],A=t=>{let e=Object.prototype.toString.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&We(t))return"HTMLElement";if(ua(e))return e};function en(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(Ge(t))return"Observable";if(M(t))return"Array";if(Pt(t))return"Buffer";let e=A(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}function la(t){return N(t?.then)&&N(t?.catch)}var kt=Object.assign(en,{all:un,any:Rt,array:M,arrayBuffer:dn,arrayLike:ln,asyncFunction:pn,asyncGenerator:mn,asyncGeneratorFunction:yn,asyncIterable:Ot,bigint:gn,bigInt64Array:wn,bigUint64Array:bn,blob:_n,boolean:xn,boundFunction:En,buffer:Pt,class:Ct,class_:Ct,dataView:Sn,date:It,detect:en,directInstanceOf:Tn,domElement:We,emptyArray:An,emptyMap:Cn,emptyObject:kn,emptySet:Rn,emptyString:Nt,emptyStringOrWhitespace:Ve,enumCase:On,error:Pn,evenInteger:In,falsy:Nn,float32Array:Ln,float64Array:jn,formData:qn,function:N,function_:N,generator:Hn,generatorFunction:Un,htmlElement:We,infinite:Bn,inRange:Dn,int16Array:vn,int32Array:zn,int8Array:Mn,integer:Lt,iterable:jt,map:ie,nan:qt,nativePromise:Ht,negativeNumber:Fn,nodeStream:$n,nonEmptyArray:Wn,nonEmptyMap:Vn,nonEmptyObject:Gn,nonEmptySet:Jn,nonEmptyString:Kn,nonEmptyStringAndNotWhitespace:Qn,null:oe,null_:oe,nullOrUndefined:Ut,number:ae,numericString:Yn,object:ce,observable:Ge,oddInteger:Xn,plainObject:Bt,positiveNumber:Zn,primitive:es,promise:ts,propertyKey:rs,regExp:ns,safeInteger:Dt,set:he,sharedArrayBuffer:ss,string:V,symbol:vt,truthy:os,tupleLike:is,typedArray:as,uint16Array:cs,uint32Array:hs,uint8Array:fs,uint8ClampedArray:us,undefined:zt,urlInstance:ds,urlSearchParams:ls,urlString:ps,validDate:ms,validLength:Mt,weakMap:ys,weakRef:gs,weakSet:ws,whitespaceString:Ft});function fn(t){return e=>Lt(e)&&Math.abs(e%2)===t}function un(t,...e){return bs(Array.prototype.every,t,e)}function Rt(t,...e){return(M(t)?t:[t]).some(n=>bs(Array.prototype.some,n,e))}function M(t,e){return Array.isArray(t)?N(e)?t.every(r=>e(r)):!0:!1}function dn(t){return A(t)==="ArrayBuffer"}function ln(t){return!Ut(t)&&!N(t)&&Mt(t.length)}function pn(t){return A(t)==="AsyncFunction"}function mn(t){return Ot(t)&&N(t.next)&&N(t.throw)}function yn(t){return A(t)==="AsyncGeneratorFunction"}function Ot(t){return N(t?.[Symbol.asyncIterator])}function gn(t){return typeof t=="bigint"}function wn(t){return A(t)==="BigInt64Array"}function bn(t){return A(t)==="BigUint64Array"}function _n(t){return A(t)==="Blob"}function xn(t){return t===!0||t===!1}function En(t){return N(t)&&!Object.prototype.hasOwnProperty.call(t,"prototype")}function Pt(t){return t?.constructor?.isBuffer?.(t)??!1}function Ct(t){return N(t)&&t.toString().startsWith("class ")}function Sn(t){return A(t)==="DataView"}function It(t){return A(t)==="Date"}function Tn(t,e){return t==null?!1:Object.getPrototypeOf(t)===e.prototype}function An(t){return M(t)&&t.length===0}function Cn(t){return ie(t)&&t.size===0}function kn(t){return ce(t)&&!ie(t)&&!he(t)&&Object.keys(t).length===0}function Rn(t){return he(t)&&t.size===0}function Nt(t){return V(t)&&t.length===0}function Ve(t){return Nt(t)||Ft(t)}function On(t,e){return Object.values(e).includes(t)}function Pn(t){return A(t)==="Error"}function In(t){return fn(0)(t)}function Nn(t){return!t}function Ln(t){return A(t)==="Float32Array"}function jn(t){return A(t)==="Float64Array"}function qn(t){return A(t)==="FormData"}function N(t){return typeof t=="function"}function Hn(t){return jt(t)&&N(t?.next)&&N(t?.throw)}function Un(t){return A(t)==="GeneratorFunction"}var pa=1,ma=["innerHTML","ownerDocument","style","attributes","nodeValue"];function We(t){return ce(t)&&t.nodeType===pa&&V(t.nodeName)&&!Bt(t)&&ma.every(e=>e in t)}function Bn(t){return t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY}function Dn(t,e){if(ae(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(M(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)}function vn(t){return A(t)==="Int16Array"}function zn(t){return A(t)==="Int32Array"}function Mn(t){return A(t)==="Int8Array"}function Lt(t){return Number.isInteger(t)}function jt(t){return N(t?.[Symbol.iterator])}function ie(t){return A(t)==="Map"}function qt(t){return Number.isNaN(t)}function Ht(t){return A(t)==="Promise"}function Fn(t){return ae(t)&&t<0}function $n(t){return ce(t)&&N(t.pipe)&&!Ge(t)}function Wn(t){return M(t)&&t.length>0}function Vn(t){return ie(t)&&t.size>0}function Gn(t){return ce(t)&&!ie(t)&&!he(t)&&Object.keys(t).length>0}function Jn(t){return he(t)&&t.size>0}function Kn(t){return V(t)&&t.length>0}function Qn(t){return V(t)&&!Ve(t)}function oe(t){return t===null}function Ut(t){return oe(t)||zt(t)}function ae(t){return typeof t=="number"&&!Number.isNaN(t)}function Yn(t){return V(t)&&!Ve(t)&&!Number.isNaN(Number(t))}function ce(t){return!oe(t)&&(typeof t=="object"||N(t))}function Ge(t){return t?t===t[Symbol.observable]?.()||t===t["@@observable"]?.():!1}function Xn(t){return fn(1)(t)}function Bt(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Zn(t){return ae(t)&&t>0}function es(t){return oe(t)||da(typeof t)}function ts(t){return Ht(t)||la(t)}function rs(t){return Rt([V,ae,vt],t)}function ns(t){return A(t)==="RegExp"}function Dt(t){return Number.isSafeInteger(t)}function he(t){return A(t)==="Set"}function ss(t){return A(t)==="SharedArrayBuffer"}function V(t){return typeof t=="string"}function vt(t){return typeof t=="symbol"}function os(t){return!!t}function is(t,e){return M(e)&&M(t)&&e.length===t.length?e.every((r,n)=>r(t[n])):!1}function as(t){return fa(A(t))}function cs(t){return A(t)==="Uint16Array"}function hs(t){return A(t)==="Uint32Array"}function fs(t){return A(t)==="Uint8Array"}function us(t){return A(t)==="Uint8ClampedArray"}function zt(t){return t===void 0}function ds(t){return A(t)==="URL"}function ls(t){return A(t)==="URLSearchParams"}function ps(t){if(!V(t))return!1;try{return new URL(t),!0}catch{return!1}}function ms(t){return It(t)&&!qt(Number(t))}function Mt(t){return Dt(t)&&t>=0}function ys(t){return A(t)==="WeakMap"}function gs(t){return A(t)==="WeakRef"}function ws(t){return A(t)==="WeakSet"}function Ft(t){return V(t)&&/^\s+$/.test(t)}function bs(t,e,r){if(!N(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)}function l(t,e){return`Expected value which is \`${t}\`, received value of type \`${kt(e)}\`.`}function tn(t){return Array.from(new Set(t))}var ya=new Intl.ListFormat("en",{style:"long",type:"conjunction"}),ga=new Intl.ListFormat("en",{style:"long",type:"disjunction"});function _s(t,e){let r=tn((M(t)?t:[t]).map(s=>`\`${s}\``)),n=tn(e.map(s=>`\`${kt(s)}\``));return`Expected values which are ${ga.format(r)}. Received values of type${n.length>1?"s":""} ${ya.format(n)}.`}var d={all:_a,any:xa,array:Ea,arrayBuffer:Sa,arrayLike:Ta,asyncFunction:Aa,asyncGenerator:Ca,asyncGeneratorFunction:ka,asyncIterable:Ra,bigint:Oa,bigInt64Array:Pa,bigUint64Array:Ia,blob:Na,boolean:La,boundFunction:ja,buffer:qa,class:rn,class_:rn,dataView:Ha,date:Ua,directInstanceOf:Ba,domElement:sn,emptyArray:Da,emptyMap:va,emptyObject:za,emptySet:Ma,emptyString:Fa,emptyStringOrWhitespace:$a,enumCase:Wa,error:Va,evenInteger:Ga,falsy:Ja,float32Array:Ka,float64Array:Qa,formData:Ya,function:nn,function_:nn,generator:Xa,generatorFunction:Za,htmlElement:sn,infinite:ec,inRange:tc,int16Array:rc,int32Array:nc,int8Array:sc,integer:oc,iterable:ic,map:ac,nan:cc,nativePromise:hc,negativeNumber:fc,nodeStream:uc,nonEmptyArray:dc,nonEmptyMap:lc,nonEmptyObject:pc,nonEmptySet:mc,nonEmptyString:yc,nonEmptyStringAndNotWhitespace:gc,null:on,null_:on,nullOrUndefined:wc,number:bc,numericString:_c,object:xc,observable:Ec,oddInteger:Sc,plainObject:Tc,positiveNumber:Ac,primitive:Cc,promise:kc,propertyKey:Rc,regExp:Oc,safeInteger:Pc,set:Ic,sharedArrayBuffer:Nc,string:Lc,symbol:jc,truthy:qc,tupleLike:Hc,typedArray:Uc,uint16Array:Bc,uint32Array:Dc,uint8Array:vc,uint8ClampedArray:zc,undefined:Mc,urlInstance:Fc,urlSearchParams:$c,urlString:Wc,validDate:Vc,validLength:Gc,weakMap:Jc,weakRef:Kc,weakSet:Qc,whitespaceString:Yc},$t={isArray:"Array",isArrayBuffer:"ArrayBuffer",isArrayLike:"array-like",isAsyncFunction:"AsyncFunction",isAsyncGenerator:"AsyncGenerator",isAsyncGeneratorFunction:"AsyncGeneratorFunction",isAsyncIterable:"AsyncIterable",isBigint:"bigint",isBigInt64Array:"BigInt64Array",isBigUint64Array:"BigUint64Array",isBlob:"Blob",isBoolean:"boolean",isBoundFunction:"Function",isBuffer:"Buffer",isClass:"Class",isDataView:"DataView",isDate:"Date",isDirectInstanceOf:"T",isDomElement:"HTMLElement",isEmptyArray:"empty array",isEmptyMap:"empty map",isEmptyObject:"empty object",isEmptySet:"empty set",isEmptyString:"empty string",isEmptyStringOrWhitespace:"empty string or whitespace",isEnumCase:"EnumCase",isError:"Error",isEvenInteger:"even integer",isFalsy:"falsy",isFloat32Array:"Float32Array",isFloat64Array:"Float64Array",isFormData:"FormData",isFunction:"Function",isGenerator:"Generator",isGeneratorFunction:"GeneratorFunction",isHtmlElement:"HTMLElement",isInfinite:"infinite number",isInRange:"in range",isInt16Array:"Int16Array",isInt32Array:"Int32Array",isInt8Array:"Int8Array",isInteger:"integer",isIterable:"Iterable",isMap:"Map",isNan:"NaN",isNativePromise:"native Promise",isNegativeNumber:"negative number",isNodeStream:"Node.js Stream",isNonEmptyArray:"non-empty array",isNonEmptyMap:"non-empty map",isNonEmptyObject:"non-empty object",isNonEmptySet:"non-empty set",isNonEmptyString:"non-empty string",isNonEmptyStringAndNotWhitespace:"non-empty string and not whitespace",isNull:"null",isNullOrUndefined:"null or undefined",isNumber:"number",isNumericString:"string with a number",isObject:"Object",isObservable:"Observable",isOddInteger:"odd integer",isPlainObject:"plain object",isPositiveNumber:"positive number",isPrimitive:"primitive",isPromise:"Promise",isPropertyKey:"PropertyKey",isRegExp:"RegExp",isSafeInteger:"integer",isSet:"Set",isSharedArrayBuffer:"SharedArrayBuffer",isString:"string",isSymbol:"symbol",isTruthy:"truthy",isTupleLike:"tuple-like",isTypedArray:"TypedArray",isUint16Array:"Uint16Array",isUint32Array:"Uint32Array",isUint8Array:"Uint8Array",isUint8ClampedArray:"Uint8ClampedArray",isUndefined:"undefined",isUrlInstance:"URL",isUrlSearchParams:"URLSearchParams",isUrlString:"string with a URL",isValidDate:"valid Date",isValidLength:"valid length",isWeakMap:"WeakMap",isWeakRef:"WeakRef",isWeakSet:"WeakSet",isWhitespaceString:"whitespace string"};function wa(t){return Object.keys(t)}var ba=wa($t);function xs(t){return ba.includes(t)}function _a(t,...e){if(!un(t,...e)){let r=xs(t.name)?$t[t.name]:"predicate returns truthy for all values";throw new TypeError(_s(r,e))}}function xa(t,...e){if(!Rt(t,...e)){let n=(M(t)?t:[t]).map(s=>xs(s.name)?$t[s.name]:"predicate returns truthy for any value");throw new TypeError(_s(n,e))}}function Ea(t,e,r){if(!M(t))throw new TypeError(r??l("Array",t));e&&t.forEach(e)}function Sa(t,e){if(!dn(t))throw new TypeError(e??l("ArrayBuffer",t))}function Ta(t,e){if(!ln(t))throw new TypeError(e??l("array-like",t))}function Aa(t,e){if(!pn(t))throw new TypeError(e??l("AsyncFunction",t))}function Ca(t,e){if(!mn(t))throw new TypeError(e??l("AsyncGenerator",t))}function ka(t,e){if(!yn(t))throw new TypeError(e??l("AsyncGeneratorFunction",t))}function Ra(t,e){if(!Ot(t))throw new TypeError(e??l("AsyncIterable",t))}function Oa(t,e){if(!gn(t))throw new TypeError(e??l("bigint",t))}function Pa(t,e){if(!wn(t))throw new TypeError(e??l("BigInt64Array",t))}function Ia(t,e){if(!bn(t))throw new TypeError(e??l("BigUint64Array",t))}function Na(t,e){if(!_n(t))throw new TypeError(e??l("Blob",t))}function La(t,e){if(!xn(t))throw new TypeError(e??l("boolean",t))}function ja(t,e){if(!En(t))throw new TypeError(e??l("Function",t))}function qa(t,e){if(!Pt(t))throw new TypeError(e??l("Buffer",t))}function rn(t,e){if(!Ct(t))throw new TypeError(e??l("Class",t))}function Ha(t,e){if(!Sn(t))throw new TypeError(e??l("DataView",t))}function Ua(t,e){if(!It(t))throw new TypeError(e??l("Date",t))}function Ba(t,e,r){if(!Tn(t,e))throw new TypeError(r??l("T",t))}function Da(t,e){if(!An(t))throw new TypeError(e??l("empty array",t))}function va(t,e){if(!Cn(t))throw new TypeError(e??l("empty map",t))}function za(t,e){if(!kn(t))throw new TypeError(e??l("empty object",t))}function Ma(t,e){if(!Rn(t))throw new TypeError(e??l("empty set",t))}function Fa(t,e){if(!Nt(t))throw new TypeError(e??l("empty string",t))}function $a(t,e){if(!Ve(t))throw new TypeError(e??l("empty string or whitespace",t))}function Wa(t,e,r){if(!On(t,e))throw new TypeError(r??l("EnumCase",t))}function Va(t,e){if(!Pn(t))throw new TypeError(e??l("Error",t))}function Ga(t,e){if(!In(t))throw new TypeError(e??l("even integer",t))}function Ja(t,e){if(!Nn(t))throw new TypeError(e??l("falsy",t))}function Ka(t,e){if(!Ln(t))throw new TypeError(e??l("Float32Array",t))}function Qa(t,e){if(!jn(t))throw new TypeError(e??l("Float64Array",t))}function Ya(t,e){if(!qn(t))throw new TypeError(e??l("FormData",t))}function nn(t,e){if(!N(t))throw new TypeError(e??l("Function",t))}function Xa(t,e){if(!Hn(t))throw new TypeError(e??l("Generator",t))}function Za(t,e){if(!Un(t))throw new TypeError(e??l("GeneratorFunction",t))}function sn(t,e){if(!We(t))throw new TypeError(e??l("HTMLElement",t))}function ec(t,e){if(!Bn(t))throw new TypeError(e??l("infinite number",t))}function tc(t,e,r){if(!Dn(t,e))throw new TypeError(r??l("in range",t))}function rc(t,e){if(!vn(t))throw new TypeError(e??l("Int16Array",t))}function nc(t,e){if(!zn(t))throw new TypeError(e??l("Int32Array",t))}function sc(t,e){if(!Mn(t))throw new TypeError(e??l("Int8Array",t))}function oc(t,e){if(!Lt(t))throw new TypeError(e??l("integer",t))}function ic(t,e){if(!jt(t))throw new TypeError(e??l("Iterable",t))}function ac(t,e){if(!ie(t))throw new TypeError(e??l("Map",t))}function cc(t,e){if(!qt(t))throw new TypeError(e??l("NaN",t))}function hc(t,e){if(!Ht(t))throw new TypeError(e??l("native Promise",t))}function fc(t,e){if(!Fn(t))throw new TypeError(e??l("negative number",t))}function uc(t,e){if(!$n(t))throw new TypeError(e??l("Node.js Stream",t))}function dc(t,e){if(!Wn(t))throw new TypeError(e??l("non-empty array",t))}function lc(t,e){if(!Vn(t))throw new TypeError(e??l("non-empty map",t))}function pc(t,e){if(!Gn(t))throw new TypeError(e??l("non-empty object",t))}function mc(t,e){if(!Jn(t))throw new TypeError(e??l("non-empty set",t))}function yc(t,e){if(!Kn(t))throw new TypeError(e??l("non-empty string",t))}function gc(t,e){if(!Qn(t))throw new TypeError(e??l("non-empty string and not whitespace",t))}function on(t,e){if(!oe(t))throw new TypeError(e??l("null",t))}function wc(t,e){if(!Ut(t))throw new TypeError(e??l("null or undefined",t))}function bc(t,e){if(!ae(t))throw new TypeError(e??l("number",t))}function _c(t,e){if(!Yn(t))throw new TypeError(e??l("string with a number",t))}function xc(t,e){if(!ce(t))throw new TypeError(e??l("Object",t))}function Ec(t,e){if(!Ge(t))throw new TypeError(e??l("Observable",t))}function Sc(t,e){if(!Xn(t))throw new TypeError(e??l("odd integer",t))}function Tc(t,e){if(!Bt(t))throw new TypeError(e??l("plain object",t))}function Ac(t,e){if(!Zn(t))throw new TypeError(e??l("positive number",t))}function Cc(t,e){if(!es(t))throw new TypeError(e??l("primitive",t))}function kc(t,e){if(!ts(t))throw new TypeError(e??l("Promise",t))}function Rc(t,e){if(!rs(t))throw new TypeError(e??l("PropertyKey",t))}function Oc(t,e){if(!ns(t))throw new TypeError(e??l("RegExp",t))}function Pc(t,e){if(!Dt(t))throw new TypeError(e??l("integer",t))}function Ic(t,e){if(!he(t))throw new TypeError(e??l("Set",t))}function Nc(t,e){if(!ss(t))throw new TypeError(e??l("SharedArrayBuffer",t))}function Lc(t,e){if(!V(t))throw new TypeError(e??l("string",t))}function jc(t,e){if(!vt(t))throw new TypeError(e??l("symbol",t))}function qc(t,e){if(!os(t))throw new TypeError(e??l("truthy",t))}function Hc(t,e,r){if(!is(t,e))throw new TypeError(r??l("tuple-like",t))}function Uc(t,e){if(!as(t))throw new TypeError(e??l("TypedArray",t))}function Bc(t,e){if(!cs(t))throw new TypeError(e??l("Uint16Array",t))}function Dc(t,e){if(!hs(t))throw new TypeError(e??l("Uint32Array",t))}function vc(t,e){if(!fs(t))throw new TypeError(e??l("Uint8Array",t))}function zc(t,e){if(!us(t))throw new TypeError(e??l("Uint8ClampedArray",t))}function Mc(t,e){if(!zt(t))throw new TypeError(e??l("undefined",t))}function Fc(t,e){if(!ds(t))throw new TypeError(e??l("URL",t))}function $c(t,e){if(!ls(t))throw new TypeError(e??l("URLSearchParams",t))}function Wc(t,e){if(!ps(t))throw new TypeError(e??l("string with a URL",t))}function Vc(t,e){if(!ms(t))throw new TypeError(e??l("valid Date",t))}function Gc(t,e){if(!Mt(t))throw new TypeError(e??l("valid length",t))}function Jc(t,e){if(!ys(t))throw new TypeError(e??l("WeakMap",t))}function Kc(t,e){if(!gs(t))throw new TypeError(e??l("WeakRef",t))}function Qc(t,e){if(!ws(t))throw new TypeError(e??l("WeakSet",t))}function Yc(t,e){if(!Ft(t))throw new TypeError(e??l("whitespace string",t))}var c=kt;var Yi=require("node:events");var Wt=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},G=Object.freeze({pending:Symbol("pending"),canceled:Symbol("canceled"),resolved:Symbol("resolved"),rejected:Symbol("rejected")}),fe=class t{static fn(e){return(...r)=>new t((n,s,o)=>{r.push(o),e(...r).then(n,s)})}#r=[];#n=!0;#e=G.pending;#t;#s;constructor(e){this.#t=new Promise((r,n)=>{this.#s=n;let s=a=>{(this.#e!==G.canceled||!i.shouldReject)&&(r(a),this.#o(G.resolved))},o=a=>{(this.#e!==G.canceled||!i.shouldReject)&&(n(a),this.#o(G.rejected))},i=a=>{if(this.#e!==G.pending)throw new Error(`The \`onCancel\` handler was attached after the promise ${this.#e.description}.`);this.#r.push(a)};Object.defineProperties(i,{shouldReject:{get:()=>this.#n,set:a=>{this.#n=a}}}),e(s,o,i)})}then(e,r){return this.#t.then(e,r)}catch(e){return this.#t.catch(e)}finally(e){return this.#t.finally(e)}cancel(e){if(this.#e===G.pending){if(this.#o(G.canceled),this.#r.length>0)try{for(let r of this.#r)r()}catch(r){this.#s(r);return}this.#n&&this.#s(new Wt(e))}}get isCanceled(){return this.#e===G.canceled}#o(e){this.#e===G.pending&&(this.#e=e)}};Object.setPrototypeOf(fe.prototype,Promise.prototype);function Xc(t){return c.object(t)&&"_onResponse"in t}var R=class extends Error{input;code;stack;response;request;timings;constructor(e,r,n){if(super(e,{cause:r}),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=r.code??"ERR_GOT_REQUEST_ERROR",this.input=r.input,Xc(n)?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),this.options=n.options):this.options=n,this.timings=this.request?.timings,c.string(r.stack)&&c.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,o=this.stack.slice(s).split(`
`).reverse(),i=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;i.length>0&&i[0]===o[0];)o.shift();this.stack=`${this.stack.slice(0,s)}${o.reverse().join(`
`)}${i.reverse().join(`
`)}`}}},Je=class extends R{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}},Y=class extends R{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}},Ke=class extends R{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}},_e=class extends R{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}},Qe=class extends R{timings;event;constructor(e,r,n){super(e.message,e,n),this.name="TimeoutError",this.event=e.event,this.timings=r}},xe=class extends R{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}},Ye=class extends R{constructor(e){super("Retrying",{},e),this.name="RetryError",this.code="ERR_RETRYING"}},Xe=class extends R{constructor(e){super("This operation was aborted.",{},e),this.code="ERR_ABORTED",this.name="AbortError"}};var Jr=q(require("node:process"),1),xt=require("node:buffer"),Ki=require("node:stream"),Me=q(require("node:http"),1);var Ss=require("events"),Ts=require("util"),As=q(Es(),1),eh=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=i=>{i.once(Ss.errorMonitor,()=>{e.error=Date.now(),e.phases.total=e.error-e.start})};r(t);let n=()=>{e.abort=Date.now(),e.phases.total=e.abort-e.start};t.prependOnceListener("abort",n);let s=i=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,Ts.types.isProxy(i))return;let a=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};i.prependOnceListener("lookup",a),(0,As.default)(i,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(i.removeListener("lookup",a),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?s(t.socket):t.prependOnceListener("socket",s);let o=()=>{e.upload=Date.now(),e.phases.request=e.upload-(e.secureConnect??e.connect)};return t.writableFinished?o():t.prependOnceListener("finish",o),t.prependOnceListener("response",i=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,i.timings=e,r(i),i.prependOnceListener("end",()=>{t.off("abort",n),i.off("aborted",n),!e.phases.total&&(e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start)}),i.prependOnceListener("aborted",n)}),e},Cs=eh;var to=q(require("node:events"),1),Se=q(require("node:url"),1),ro=q(require("node:crypto"),1),nt=q(require("node:stream"),1);var th="text/plain",rh="us-ascii",Kt=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),nh=new Set(["https:","http:","file:"]),sh=t=>{try{let{protocol:e}=new URL(t);return e.endsWith(":")&&!e.includes(".")&&!nh.has(e)}catch{return!1}},oh=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:s,hash:o}=r.groups,i=n.split(";");o=e?"":o;let a=!1;i[i.length-1]==="base64"&&(i.pop(),a=!0);let h=i.shift()?.toLowerCase()??"",m=[...i.map(w=>{let[p,y=""]=w.split("=").map(b=>b.trim());return p==="charset"&&(y=y.toLowerCase(),y===rh)?"":`${p}${y?`=${y}`:""}`}).filter(Boolean)];return a&&m.push("base64"),(m.length>0||h&&h!==th)&&m.unshift(h),`data:${m.join(";")},${a?s.trim():s}${o?`#${o}`:""}`};function Qt(t,e){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),t=t.trim(),/^data:/i.test(t))return oh(t,e);if(sh(t))return t;let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let s=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&s.protocol==="https:"&&(s.protocol="http:"),e.forceHttps&&s.protocol==="http:"&&(s.protocol="https:"),e.stripAuthentication&&(s.username="",s.password=""),e.stripHash?s.hash="":e.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){let i=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,h="";for(;;){let m=i.exec(s.pathname);if(!m)break;let w=m[0],p=m.index,y=s.pathname.slice(a,p);h+=y.replace(/\/{2,}/g,"/"),h+=w,a=p+w.length}let u=s.pathname.slice(a,s.pathname.length);h+=u.replace(/\/{2,}/g,"/"),s.pathname=h}if(s.pathname)try{s.pathname=decodeURI(s.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let i=s.pathname.split("/"),a=i[i.length-1];Kt(a,e.removeDirectoryIndex)&&(i=i.slice(0,-1),s.pathname=i.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let i of[...s.searchParams.keys()])Kt(i,e.removeQueryParameters)&&s.searchParams.delete(i);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(s.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(let i of[...s.searchParams.keys()])Kt(i,e.keepQueryParameters)||s.searchParams.delete(i);if(e.sortQueryParameters){s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch{}}e.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,"")),e.removeExplicitPort&&s.port&&(s.port="");let o=t;return t=s.toString(),!e.removeSingleSlash&&s.pathname==="/"&&!o.endsWith("/")&&s.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||s.pathname==="/")&&s.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var $s=require("node:events"),Ws=require("node:stream/promises");function ih(t,{checkOpen:e=!0}={}){return t!==null&&typeof t=="object"&&(t.writable||t.readable||!e||t.writable===void 0&&t.readable===void 0)&&typeof t.pipe=="function"}function ks(t,{checkOpen:e=!0}={}){return ih(t,{checkOpen:e})&&(t.readable||!e)&&typeof t.read=="function"&&typeof t.readable=="boolean"&&typeof t.readableObjectMode=="boolean"&&typeof t.destroy=="function"&&typeof t.destroyed=="boolean"}var ah=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),Yt=class{#r;#n;#e=!1;#t=void 0;constructor(e,r){this.#r=e,this.#n=r}next(){let e=()=>this.#s();return this.#t=this.#t?this.#t.then(e,e):e(),this.#t}return(e){let r=()=>this.#o(e);return this.#t?this.#t.then(r,r):r()}async#s(){if(this.#e)return{done:!0,value:void 0};let e;try{e=await this.#r.read()}catch(r){throw this.#t=void 0,this.#e=!0,this.#r.releaseLock(),r}return e.done&&(this.#t=void 0,this.#e=!0,this.#r.releaseLock()),e}async#o(e){if(this.#e)return{done:!0,value:e};if(this.#e=!0,!this.#n){let r=this.#r.cancel(e);return this.#r.releaseLock(),await r,{done:!0,value:e}}return this.#r.releaseLock(),{done:!0,value:e}}},Xt=Symbol();function Rs(){return this[Xt].next()}Object.defineProperty(Rs,"name",{value:"next"});function Os(t){return this[Xt].return(t)}Object.defineProperty(Os,"name",{value:"return"});var ch=Object.create(ah,{next:{enumerable:!0,configurable:!0,writable:!0,value:Rs},return:{enumerable:!0,configurable:!0,writable:!0,value:Os}});function Zt({preventCancel:t=!1}={}){let e=this.getReader(),r=new Yt(e,t),n=Object.create(ch);return n[Xt]=r,n}var Ps=t=>{if(ks(t,{checkOpen:!1})&&Ee.on!==void 0)return fh(t);if(typeof t?.[Symbol.asyncIterator]=="function")return t;if(hh.call(t)==="[object ReadableStream]")return Zt.call(t);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:hh}=Object.prototype,fh=async function*(t){let e=new AbortController,r={};uh(t,e,r);try{for await(let[n]of Ee.on(t,"data",{signal:e.signal}))yield n}catch(n){if(r.error!==void 0)throw r.error;if(!e.signal.aborted)throw n}finally{t.destroy()}},uh=async(t,e,r)=>{try{await Ee.finished(t,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(n){r.error=n}finally{e.abort()}},Ee={};var Ls=async(t,{init:e,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,finalize:a},{maxBuffer:h=Number.POSITIVE_INFINITY}={})=>{let u=Ps(t),m=e();m.length=0;try{for await(let w of u){let p=lh(w),y=r[p](w,m);js({convertedChunk:y,state:m,getSize:n,truncateChunk:s,addChunk:o,maxBuffer:h})}return dh({state:m,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,maxBuffer:h}),a(m)}catch(w){let p=typeof w=="object"&&w!==null?w:new Error(w);throw p.bufferedData=a(m),p}},dh=({state:t,getSize:e,truncateChunk:r,addChunk:n,getFinalChunk:s,maxBuffer:o})=>{let i=s(t);i!==void 0&&js({convertedChunk:i,state:t,getSize:e,truncateChunk:r,addChunk:n,maxBuffer:o})},js=({convertedChunk:t,state:e,getSize:r,truncateChunk:n,addChunk:s,maxBuffer:o})=>{let i=r(t),a=e.length+i;if(a<=o){Is(t,e,s,a);return}let h=n(t,o-e.length);throw h!==void 0&&Is(h,e,s,o),new Ze},Is=(t,e,r,n)=>{e.contents=r(t,e,n),e.length=n},lh=t=>{let e=typeof t;if(e==="string")return"string";if(e!=="object"||t===null)return"others";if(globalThis.Buffer?.isBuffer(t))return"buffer";let r=Ns.call(t);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(t.byteLength)&&Number.isInteger(t.byteOffset)&&Ns.call(t.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:Ns}=Object.prototype,Ze=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var qs=()=>{};var Hs=t=>{throw new Error(`Streams in object mode are not supported: ${String(t)}`)},Us=t=>t.length;async function er(t,e){return Ls(t,Eh,e)}var ph=()=>({contents:new ArrayBuffer(0)}),mh=t=>yh.encode(t),yh=new TextEncoder,Bs=t=>new Uint8Array(t),Ds=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),gh=(t,e)=>t.slice(0,e),wh=(t,{contents:e,length:r},n)=>{let s=Ms()?_h(e,n):bh(e,n);return new Uint8Array(s).set(t,r),s},bh=(t,e)=>{if(e<=t.byteLength)return t;let r=new ArrayBuffer(zs(e));return new Uint8Array(r).set(new Uint8Array(t),0),r},_h=(t,e)=>{if(e<=t.maxByteLength)return t.resize(e),t;let r=new ArrayBuffer(e,{maxByteLength:zs(e)});return new Uint8Array(r).set(new Uint8Array(t),0),r},zs=t=>vs**Math.ceil(Math.log(t)/Math.log(vs)),vs=2,xh=({contents:t,length:e})=>Ms()?t:t.slice(0,e),Ms=()=>"resize"in ArrayBuffer.prototype,Eh={init:ph,convertChunk:{string:mh,buffer:Bs,arrayBuffer:Bs,dataView:Ds,typedArray:Ds,others:Hs},getSize:Us,truncateChunk:gh,addChunk:wh,getFinalChunk:qs,finalize:xh};async function et(t,e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return Fs(await er(t,e))}catch(r){throw r.bufferedData!==void 0&&(r.bufferedData=Fs(r.bufferedData)),r}}var Fs=t=>globalThis.Buffer.from(t);Object.assign(Ee,{on:$s.on,finished:Ws.finished});var rt=q(Gs(),1);var Js=require("node:stream");function ue(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLowerCase(),r]))}var de=class extends Js.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:r,body:n,url:s}){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Uint8Array))throw new TypeError("Argument `body` should be a buffer");if(typeof s!="string")throw new TypeError("Argument `url` should be a string");super({read(){this.push(n),this.push(null)}}),this.statusCode=e,this.headers=ue(r),this.body=n,this.url=s}};var Te=q(Zs(),1);var Nh=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function sr(t,e){if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set([...Object.keys(t),...Nh]),n={};for(let s of r)s in e||(n[s]={get(){let o=t[s];return typeof o=="function"?o.bind(t):o},set(o){t[s]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}var tt=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}},K=class extends Error{constructor(e){super(e.message),Object.assign(this,e)}};var ir=class{constructor(e,r){this.hooks=new Map,this.request=()=>(n,s)=>{let o;if(typeof n=="string")o=or(Se.default.parse(n)),n={};else if(n instanceof Se.default.URL)o=or(Se.default.parse(n.toString())),n={};else{let[p,...y]=(n.path??"").split("?"),b=y.length>0?`?${y.join("?")}`:"";o=or({...n,pathname:p,search:b})}n={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...n,...qh(o)},n.headers=Object.fromEntries(Lh(n.headers).map(([p,y])=>[p.toLowerCase(),y]));let i=new to.default,a=Qt(Se.default.format(o),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),h=`${n.method}:${a}`;n.body&&n.method!==void 0&&["POST","PATCH","PUT"].includes(n.method)&&(n.body instanceof nt.default.Readable?n.cache=!1:h+=`:${ro.default.createHash("md5").update(n.body).digest("hex")}`);let u=!1,m=!1,w=p=>{m=!0;let y=!1,b=()=>{},f=new Promise(g=>{b=()=>{y||(y=!0,g())}}),E=async g=>{if(u){g.status=g.statusCode;let _=rt.default.fromObject(u.cachePolicy).revalidatedPolicy(p,g);if(!_.modified){g.resume(),await new Promise(P=>{g.once("end",P)});let T=eo(_.policy.responseHeaders());g=new de({statusCode:u.statusCode,headers:T,body:u.body,url:u.url}),g.cachePolicy=_.policy,g.fromCache=!0}}g.fromCache||(g.cachePolicy=new rt.default(p,g,p),g.fromCache=!1);let S;p.cache&&g.cachePolicy.storable()?(S=jh(g),(async()=>{try{let _=et(g);await Promise.race([f,new Promise(k=>g.once("end",k)),new Promise(k=>g.once("close",k))]);let T=await _,P={url:g.url,statusCode:g.fromCache?u.statusCode:g.statusCode,body:T,cachePolicy:g.cachePolicy.toObject()},j=p.strictTtl?g.cachePolicy.timeToLive():void 0;if(p.maxTtl&&(j=j?Math.min(j,p.maxTtl):p.maxTtl),this.hooks.size>0)for(let k of this.hooks.keys())P=await this.runHook(k,P,g);await this.cache.set(h,P,j)}catch(_){i.emit("error",new K(_))}})()):p.cache&&u&&(async()=>{try{await this.cache.delete(h)}catch(_){i.emit("error",new K(_))}})(),i.emit("response",S??g),typeof s=="function"&&s(S??g)};try{let g=this.cacheRequest(p,E);g.once("error",b),g.once("abort",b),g.once("destroy",b),i.emit("request",g)}catch(g){i.emit("error",new tt(g))}};return(async()=>{let p=async b=>{await Promise.resolve();let f=b.cache?await this.cache.get(h):void 0;if(f===void 0&&!b.forceRefresh){w(b);return}let E=rt.default.fromObject(f.cachePolicy);if(E.satisfiesWithoutRevalidation(b)&&!b.forceRefresh){let g=eo(E.responseHeaders()),S=new de({statusCode:f.statusCode,headers:g,body:f.body,url:f.url});S.cachePolicy=E,S.fromCache=!0,i.emit("response",S),typeof s=="function"&&s(S)}else E.satisfiesWithoutRevalidation(b)&&Date.now()>=E.timeToLive()&&b.forceRefresh?(await this.cache.delete(h),b.headers=E.revalidationHeaders(b),w(b)):(u=f,b.headers=E.revalidationHeaders(b),w(b))},y=b=>i.emit("error",new K(b));if(this.cache instanceof Te.default){let b=this.cache;b.once("error",y),i.on("error",()=>b.removeListener("error",y)),i.on("response",()=>b.removeListener("error",y))}try{await p(n)}catch(b){n.automaticFailover&&!m&&w(n),i.emit("error",new K(b))}})(),i},this.addHook=(n,s)=>{this.hooks.has(n)||this.hooks.set(n,s)},this.removeHook=n=>this.hooks.delete(n),this.getHook=n=>this.hooks.get(n),this.runHook=async(n,...s)=>this.hooks.get(n)?.(...s),r instanceof Te.default?this.cache=r:typeof r=="string"?this.cache=new Te.default({uri:r,namespace:"cacheable-request"}):this.cache=new Te.default({store:r,namespace:"cacheable-request"}),this.request=this.request.bind(this),this.cacheRequest=e}},Lh=Object.entries,jh=t=>{let e=new nt.PassThrough({autoDestroy:!1});return sr(t,e),t.pipe(e)},qh=t=>{let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e},or=t=>({protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}),eo=t=>{let e=[];for(let r of Object.keys(t))e[r.toLowerCase()]=t[r];return e},no=ir;var Qi=q(ao(),1);var ot=async(t,{init:e,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,finalize:a},{maxBuffer:h=Number.POSITIVE_INFINITY}={})=>{if(!zh(t))throw new Error("The first argument must be a Readable, a ReadableStream, or an async iterable.");let u=e();u.length=0;try{for await(let m of t){let w=Mh(m),p=r[w](m,u);fo({convertedChunk:p,state:u,getSize:n,truncateChunk:s,addChunk:o,maxBuffer:h})}return vh({state:u,convertChunk:r,getSize:n,truncateChunk:s,addChunk:o,getFinalChunk:i,maxBuffer:h}),a(u)}catch(m){throw m.bufferedData=a(u),m}},vh=({state:t,getSize:e,truncateChunk:r,addChunk:n,getFinalChunk:s,maxBuffer:o})=>{let i=s(t);i!==void 0&&fo({convertedChunk:i,state:t,getSize:e,truncateChunk:r,addChunk:n,maxBuffer:o})},fo=({convertedChunk:t,state:e,getSize:r,truncateChunk:n,addChunk:s,maxBuffer:o})=>{let i=r(t),a=e.length+i;if(a<=o){co(t,e,s,a);return}let h=n(t,o-e.length);throw h!==void 0&&co(h,e,s,o),new st},co=(t,e,r,n)=>{e.contents=r(t,e,n),e.length=n},zh=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",Mh=t=>{let e=typeof t;if(e==="string")return"string";if(e!=="object"||t===null)return"others";if(globalThis.Buffer?.isBuffer(t))return"buffer";let r=ho.call(t);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(t.byteLength)&&Number.isInteger(t.byteOffset)&&ho.call(t.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:ho}=Object.prototype,st=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var cr=()=>{};var hr=t=>{throw new Error(`Streams in object mode are not supported: ${String(t)}`)},fr=t=>t.length;async function ur(t,e){return ot(t,Zh,e)}var Wh=()=>({contents:new ArrayBuffer(0)}),Vh=t=>Gh.encode(t),Gh=new TextEncoder,uo=t=>new Uint8Array(t),lo=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),Jh=(t,e)=>t.slice(0,e),Kh=(t,{contents:e,length:r},n)=>{let s=yo()?Yh(e,n):Qh(e,n);return new Uint8Array(s).set(t,r),s},Qh=(t,e)=>{if(e<=t.byteLength)return t;let r=new ArrayBuffer(mo(e));return new Uint8Array(r).set(new Uint8Array(t),0),r},Yh=(t,e)=>{if(e<=t.maxByteLength)return t.resize(e),t;let r=new ArrayBuffer(e,{maxByteLength:mo(e)});return new Uint8Array(r).set(new Uint8Array(t),0),r},mo=t=>po**Math.ceil(Math.log(t)/Math.log(po)),po=2,Xh=({contents:t,length:e})=>yo()?t:t.slice(0,e),yo=()=>"resize"in ArrayBuffer.prototype,Zh={init:Wh,convertChunk:{string:Vh,buffer:uo,arrayBuffer:uo,dataView:lo,typedArray:lo,others:hr},getSize:fr,truncateChunk:Jh,addChunk:Kh,getFinalChunk:cr,finalize:Xh};async function dr(t,e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return go(await ur(t,e))}catch(r){throw r.bufferedData!==void 0&&(r.bufferedData=go(r.bufferedData)),r}}var go=t=>globalThis.Buffer.from(t);var mr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},O=(t,e,r)=>(mr(t,e,"read from private field"),r?r.call(t):e.get(t)),J=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ae=(t,e,r,n)=>(mr(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),lr=(t,e,r)=>(mr(t,e,"access private method"),r),Q=t=>typeof t=="function",ef=t=>Q(t[Symbol.asyncIterator]),wo=65536;function*To(t){if(t.byteLength<=wo){yield t;return}let e=0;for(;e<t.byteLength;){let r=Math.min(t.byteLength-e,wo),n=t.buffer.slice(e,e+r);e+=n.byteLength,yield new Uint8Array(n)}}async function*tf(t){let e=t.getReader();for(;;){let{done:r,value:n}=await e.read();if(r)break;yield n}}async function*bo(t){for await(let e of t)yield*To(e)}var rf=t=>{if(ef(t))return bo(t);if(Q(t.getReader))return bo(tf(t));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},_o="abcdefghijklmnopqrstuvwxyz0123456789";function nf(){let t=16,e="";for(;t--;)e+=_o[Math.random()*_o.length<<0];return e}var Ao=t=>String(t).replace(/\r|\n/g,(e,r,n)=>e==="\r"&&n[r+1]!==`
`||e===`
`&&n[r-1]!=="\r"?`\r
`:e),sf=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();function xo(t){if(sf(t)!=="object")return!1;let e=Object.getPrototypeOf(t);return e==null?!0:(e.constructor&&e.constructor.toString())===Object.toString()}function Eo(t,e){if(typeof e=="string"){for(let[r,n]of Object.entries(t))if(e.toLowerCase()===r.toLowerCase())return n}}var of=t=>new Proxy(t,{get:(e,r)=>Eo(e,r),has:(e,r)=>Eo(e,r)!==void 0}),Pe=t=>!!(t&&Q(t.constructor)&&t[Symbol.toStringTag]==="FormData"&&Q(t.append)&&Q(t.getAll)&&Q(t.entries)&&Q(t[Symbol.iterator])),So=t=>String(t).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),le=t=>!!(t&&typeof t=="object"&&Q(t.constructor)&&t[Symbol.toStringTag]==="File"&&Q(t.stream)&&t.name!=null),af={enableAdditionalHeaders:!1},it={writable:!1,configurable:!1},X,Ce,at,ke,te,Re,Oe,ct,ht,yr,pr,Co,ko=class{constructor(t,e,r){if(J(this,ht),J(this,pr),J(this,X,`\r
`),J(this,Ce,void 0),J(this,at,void 0),J(this,ke,"-".repeat(2)),J(this,te,new TextEncoder),J(this,Re,void 0),J(this,Oe,void 0),J(this,ct,void 0),!Pe(t))throw new TypeError("Expected first argument to be a FormData instance.");let n;if(xo(e)?r=e:n=e,n||(n=nf()),typeof n!="string")throw new TypeError("Expected boundary argument to be a string.");if(r&&!xo(r))throw new TypeError("Expected options argument to be an object.");Ae(this,Oe,Array.from(t.entries())),Ae(this,ct,{...af,...r}),Ae(this,Ce,O(this,te).encode(O(this,X))),Ae(this,at,O(this,Ce).byteLength),this.boundary=`form-data-boundary-${n}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,Ae(this,Re,O(this,te).encode(`${O(this,ke)}${this.boundary}${O(this,ke)}${O(this,X).repeat(2)}`));let s={"Content-Type":this.contentType},o=lr(this,pr,Co).call(this);o&&(this.contentLength=o,s["Content-Length"]=o),this.headers=of(Object.freeze(s)),Object.defineProperties(this,{boundary:it,contentType:it,contentLength:it,headers:it})}*values(){for(let[t,e]of O(this,Oe)){let r=le(e)?e:O(this,te).encode(Ao(e));yield lr(this,ht,yr).call(this,t,r),yield r,yield O(this,Ce)}yield O(this,Re)}async*encode(){for(let t of this.values())le(t)?yield*rf(t.stream()):yield*To(t)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};X=new WeakMap;Ce=new WeakMap;at=new WeakMap;ke=new WeakMap;te=new WeakMap;Re=new WeakMap;Oe=new WeakMap;ct=new WeakMap;ht=new WeakSet;yr=function(t,e){let r="";if(r+=`${O(this,ke)}${this.boundary}${O(this,X)}`,r+=`Content-Disposition: form-data; name="${So(t)}"`,le(e)&&(r+=`; filename="${So(e.name)}"${O(this,X)}`,r+=`Content-Type: ${e.type||"application/octet-stream"}`),O(this,ct).enableAdditionalHeaders===!0){let n=le(e)?e.size:e.byteLength;n!=null&&!isNaN(n)&&(r+=`${O(this,X)}Content-Length: ${n}`)}return O(this,te).encode(`${r}${O(this,X).repeat(2)}`)};pr=new WeakSet;Co=function(){let t=0;for(let[e,r]of O(this,Oe)){let n=le(r)?r:O(this,te).encode(Ao(r)),s=le(n)?n.size:n.byteLength;if(s==null||isNaN(s))return;t+=lr(this,ht,yr).call(this,e,n).byteLength,t+=s,t+=O(this,at)}return String(t+O(this,Re).byteLength)};var Ro=require("node:buffer"),Oo=require("node:util");function Ie(t){return c.nodeStream(t)&&c.function_(t.getBoundary)}async function gr(t,e){if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(c.string(t))return Ro.Buffer.byteLength(t);if(c.buffer(t))return t.length;if(Ie(t))return(0,Oo.promisify)(t.getLength.bind(t))()}function Ne(t,e,r){let n={};for(let s of r){let o=(...i)=>{e.emit(s,...i)};n[s]=o,t.on(s,o)}return()=>{for(let[s,o]of Object.entries(n))t.off(s,o)}}var Io=q(require("node:net"),1);function wr(){let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:s}=e;r.removeListener(n,s)}t.length=0}}}var Po=Symbol("reentry"),cf=()=>{},Le=class extends Error{event;code;constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};function br(t,e,r){if(Po in t)return cf;t[Po]=!0;let n=[],{once:s,unhandleAll:o}=wr(),i=(f,E,g)=>{let S=setTimeout(E,f,f,g);S.unref?.();let _=()=>{clearTimeout(S)};return n.push(_),_},{host:a,hostname:h}=r,u=(f,E)=>{t.destroy(new Le(f,E))},m=()=>{for(let f of n)f();o()};if(t.once("error",f=>{if(m(),t.listenerCount("error")===0)throw f}),e.request!==void 0){let f=i(e.request,u,"request");s(t,"response",E=>{s(E,"end",f)})}if(e.socket!==void 0){let{socket:f}=e,E=()=>{u(f,"socket")};t.setTimeout(f,E),n.push(()=>{t.removeListener("timeout",E)})}let w=e.lookup!==void 0,p=e.connect!==void 0,y=e.secureConnect!==void 0,b=e.send!==void 0;return(w||p||y||b)&&s(t,"socket",f=>{let{socketPath:E}=t;if(f.connecting){let g=!!(E??Io.default.isIP(h??a??"")!==0);if(w&&!g&&f.address().address===void 0){let S=i(e.lookup,u,"lookup");s(f,"lookup",S)}if(p){let S=()=>i(e.connect,u,"connect");g?s(f,"connect",S()):s(f,"lookup",_=>{_===null&&s(f,"connect",S())})}y&&r.protocol==="https:"&&s(f,"connect",()=>{let S=i(e.secureConnect,u,"secureConnect");s(f,"secureConnect",S)})}if(b){let g=()=>i(e.send,u,"send");f.connecting?s(f,"connect",()=>{s(t,"upload-complete",g())}):s(t,"upload-complete",g())}}),e.response!==void 0&&s(t,"upload-complete",()=>{let f=i(e.response,u,"response");s(t,"response",f)}),e.read!==void 0&&s(t,"response",f=>{let E=i(e.read,u,"read");s(f,"end",E)}),m}function _r(t){t=t;let e={protocol:t.protocol,hostname:c.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return c.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}var je=class{weakMap;map;constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};var hf=({attemptCount:t,retryOptions:e,error:r,retryAfter:n,computedValue:s})=>{if(r.name==="RetryError")return 1;if(t>e.limit)return 0;let o=e.methods.includes(r.options.method),i=e.errorCodes.includes(r.code),a=r.response&&e.statusCodes.includes(r.response.statusCode);if(!o||!i&&!a)return 0;if(r.response){if(n)return n>s?0:n;if(r.response.statusCode===413)return 0}let h=Math.random()*e.noise;return Math.min(2**(t-1)*1e3,e.backoffLimit)+h},No=hf;var Fi=q(require("node:process"),1),ze=require("node:util"),$i=require("node:tls"),Wi=q(require("node:https"),1),Vi=q(require("node:http"),1);var F=require("node:dns"),ut=require("node:util"),Bo=q(require("node:os"),1),{Resolver:Lo}=F.promises,pe=Symbol("cacheableLookupCreateConnection"),xr=Symbol("cacheableLookupInstance"),jo=Symbol("expires"),ff=typeof F.ALL=="number",qo=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},uf=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},Ho=()=>{let t=!1,e=!1;for(let r of Object.values(Bo.default.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},df=t=>Symbol.iterator in t,ft=t=>t.catch(e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT")return[];throw e}),Uo={ttl:!0},lf={all:!0},pf={all:!0,family:4},mf={all:!0,family:6},qe=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:s=.15,resolver:o=new Lo,lookup:i=F.lookup}={}){if(this.maxTtl=r,this.errorTtl=s,this._cache=e,this._resolver=o,this._dnsLookup=i&&(0,ut.promisify)(i),this.stats={cache:0,query:0},this._resolver instanceof Lo?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=(0,ut.promisify)(this._resolver.resolve4.bind(this._resolver)),this._resolve6=(0,ut.promisify)(this._resolver.resolve6.bind(this._resolver))),this._iface=Ho(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,this.fallbackDuration=n,n>0){let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref(),this._fallbackInterval=a}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(s=>{r.all?n(null,s):n(null,s.address,s.family,s.expires,s.ttl,s.source)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let s=n.filter(o=>o.family===6);r.hints&F.V4MAPPED&&(ff&&r.hints&F.ALL||s.length===0)?uf(n):n=s}else r.family===4&&(n=n.filter(s=>s.family===4));if(r.hints&F.ADDRCONFIG){let{_iface:s}=this;n=n.filter(o=>o.family===6?s.has6:s.has4)}if(n.length===0){let s=new Error(`cacheableLookup ENOTFOUND ${e}`);throw s.code="ENOTFOUND",s.hostname=e,s}return r.all?n:n[0]}async query(e){let r="cache",n=await this._cache.get(e);if(n&&this.stats.cache++,!n){let s=this._pending[e];if(s)this.stats.cache++,n=await s;else{r="query";let o=this.queryAndCache(e);this._pending[e]=o,this.stats.query++;try{n=await o}finally{delete this._pending[e]}}}return n=n.map(s=>({...s,source:r})),n}async _resolve(e){let[r,n]=await Promise.all([ft(this._resolve4(e,Uo)),ft(this._resolve6(e,Uo))]),s=0,o=0,i=0,a=Date.now();for(let h of r)h.family=4,h.expires=a+h.ttl*1e3,s=Math.max(s,h.ttl);for(let h of n)h.family=6,h.expires=a+h.ttl*1e3,o=Math.max(o,h.ttl);return r.length>0?n.length>0?i=Math.min(s,o):i=s:i=o,{entries:[...r,...n],cacheTtl:i}}async _lookup(e){try{let[r,n]=await Promise.all([ft(this._dnsLookup(e,pf)),ft(this._dnsLookup(e,mf))]);return{entries:[...r,...n],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[jo]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(s){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=s,o}}df(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,lf);let r=await this._resolve(e);r.entries.length===0&&this._dnsLookup&&(r=await this._lookup(e),r.entries.length!==0&&this.fallbackDuration>0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,s=Date.now();for(let[o,i]of this._cache){let a=i[jo];s>=a?this._cache.delete(o):a<n&&(n=a)}n!==1/0&&this._tick(n-s)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(qo(e),pe in e)throw new Error("CacheableLookup has been already installed");e[pe]=e.createConnection,e[xr]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[pe](r,n))}uninstall(e){if(qo(e),e[pe]){if(e[xr]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[pe],delete e[pe],delete e[xr]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=Ho(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};var Gi=q(vi(),1);function Wr(t){let e=[],r=t.split(",");for(let n of r){let[s,...o]=n.split(";"),i=s.trim();if(i[0]!=="<"||i.at(-1)!==">")throw new Error(`Invalid format of the Link header reference: ${i}`);let a=i.slice(1,-1),h={};if(o.length===0)throw new Error(`Unexpected end of Link header parameters: ${o.join(";")}`);for(let u of o){let m=u.trim(),w=m.indexOf("=");if(w===-1)throw new Error(`Failed to parse Link header: ${t}`);let p=m.slice(0,w).trim(),y=m.slice(w+1).trim();h[p]=y}e.push({reference:a,parameters:h})}return e}var[zi,Uu]=Fi.default.versions.node.split(".").map(Number);function Bu(t){for(let e in t){let r=t[e];d.any([c.string,c.number,c.boolean,c.null_,c.undefined],r)}}var Du=new Map,wt,vu=()=>wt||(wt=new qe,wt),zu={request:void 0,agent:{http:void 0,https:void 0,http2:void 0},h2session:void 0,decompress:!0,timeout:{connect:void 0,lookup:void 0,read:void 0,request:void 0,response:void 0,secureConnect:void 0,send:void 0,socket:void 0},prefixUrl:"",body:void 0,form:void 0,json:void 0,cookieJar:void 0,ignoreInvalidCookies:!1,searchParams:void 0,dnsLookup:void 0,dnsCache:void 0,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:!0,maxRedirects:10,cache:void 0,throwHttpErrors:!0,username:"",password:"",http2:!1,allowGetBody:!1,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:!1,dnsLookupIpVersion:void 0,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:void 0,method:"GET",createConnection:void 0,cacheOptions:{shared:void 0,cacheHeuristic:void 0,immutableMinTimeToLive:void 0,ignoreCargoCult:void 0},https:{alpnProtocols:void 0,rejectUnauthorized:void 0,checkServerIdentity:void 0,certificateAuthority:void 0,key:void 0,certificate:void 0,passphrase:void 0,pfx:void 0,ciphers:void 0,honorCipherOrder:void 0,minVersion:void 0,maxVersion:void 0,signatureAlgorithms:void 0,tlsSessionLifetime:void 0,dhparam:void 0,ecdhCurve:void 0,certificateRevocationLists:void 0},encoding:void 0,resolveBodyOnly:!1,isStream:!1,responseType:"text",url:void 0,pagination:{transform(t){return t.request.options.responseType==="json"?t.body:JSON.parse(t.body)},paginate({response:t}){let e=t.headers.link;if(typeof e!="string"||e.trim()==="")return!1;let n=Wr(e).find(s=>s.parameters.rel==="next"||s.parameters.rel==='"next"');return n?{url:new URL(n.reference,t.url)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:!1},setHost:!0,maxHeaderSize:void 0,signal:void 0,enableUnixSockets:!1},Mu=t=>{let{hooks:e,retry:r}=t,n={...t,context:{...t.context},cacheOptions:{...t.cacheOptions},https:{...t.https},agent:{...t.agent},headers:{...t.headers},retry:{...r,errorCodes:[...r.errorCodes],methods:[...r.methods],statusCodes:[...r.statusCodes]},timeout:{...t.timeout},hooks:{init:[...e.init],beforeRequest:[...e.beforeRequest],beforeError:[...e.beforeError],beforeRedirect:[...e.beforeRedirect],beforeRetry:[...e.beforeRetry],afterResponse:[...e.afterResponse]},searchParams:t.searchParams?new URLSearchParams(t.searchParams):void 0,pagination:{...t.pagination}};return n.url!==void 0&&(n.prefixUrl=""),n},Fu=t=>{let{hooks:e,retry:r}=t,n={...t};return c.object(t.context)&&(n.context={...t.context}),c.object(t.cacheOptions)&&(n.cacheOptions={...t.cacheOptions}),c.object(t.https)&&(n.https={...t.https}),c.object(t.cacheOptions)&&(n.cacheOptions={...n.cacheOptions}),c.object(t.agent)&&(n.agent={...t.agent}),c.object(t.headers)&&(n.headers={...t.headers}),c.object(r)&&(n.retry={...r},c.array(r.errorCodes)&&(n.retry.errorCodes=[...r.errorCodes]),c.array(r.methods)&&(n.retry.methods=[...r.methods]),c.array(r.statusCodes)&&(n.retry.statusCodes=[...r.statusCodes])),c.object(t.timeout)&&(n.timeout={...t.timeout}),c.object(e)&&(n.hooks={...e},c.array(e.init)&&(n.hooks.init=[...e.init]),c.array(e.beforeRequest)&&(n.hooks.beforeRequest=[...e.beforeRequest]),c.array(e.beforeError)&&(n.hooks.beforeError=[...e.beforeError]),c.array(e.beforeRedirect)&&(n.hooks.beforeRedirect=[...e.beforeRedirect]),c.array(e.beforeRetry)&&(n.hooks.beforeRetry=[...e.beforeRetry]),c.array(e.afterResponse)&&(n.hooks.afterResponse=[...e.afterResponse])),c.object(t.pagination)&&(n.pagination={...t.pagination}),n},$u=t=>{let e=[t.timeout.socket,t.timeout.connect,t.timeout.lookup,t.timeout.request,t.timeout.secureConnect].filter(r=>typeof r=="number");if(e.length>0)return Math.min(...e)},Mi=(t,e,r)=>{let n=t.hooks?.init;if(n)for(let s of n)s(e,r)},B=class t{_unixOptions;_internals;_merging;_init;constructor(e,r,n){if(d.any([c.string,c.urlInstance,c.object,c.undefined],e),d.any([c.object,c.undefined],r),d.any([c.object,c.undefined],n),e instanceof t||r instanceof t)throw new TypeError("The defaults must be passed as the third argument");this._internals=Mu(n?._internals??n??zu),this._init=[...n?._init??[]],this._merging=!1,this._unixOptions=void 0;try{if(c.plainObject(e))try{this.merge(e),this.merge(r)}finally{this.url=e.url}else try{this.merge(r)}finally{if(r?.url!==void 0)if(e===void 0)this.url=r.url;else throw new TypeError("The `url` option is mutually exclusive with the `input` argument");else e!==void 0&&(this.url=e)}}catch(s){throw s.options=this,s}}merge(e){if(e){if(e instanceof t){for(let r of e._init)this.merge(r);return}e=Fu(e),Mi(this,e,this),Mi(e,e,this),this._merging=!0,"isStream"in e&&(this.isStream=e.isStream);try{let r=!1;for(let n in e){if(n==="mutableDefaults"||n==="handlers"||n==="url")continue;if(!(n in this))throw new Error(`Unexpected option: ${n}`);let s=e[n];s!==void 0&&(this[n]=s,r=!0)}r&&this._init.push(e)}finally{this._merging=!1}}}get request(){return this._internals.request}set request(e){d.any([c.function_,c.undefined],e),this._internals.request=e}get agent(){return this._internals.agent}set agent(e){d.plainObject(e);for(let r in e){if(!(r in this._internals.agent))throw new TypeError(`Unexpected agent option: ${r}`);d.any([c.object,c.undefined],e[r])}this._merging?Object.assign(this._internals.agent,e):this._internals.agent={...e}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){d.boolean(e),this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){d.plainObject(e);for(let r in e){if(!(r in this._internals.timeout))throw new Error(`Unexpected timeout option: ${r}`);d.any([c.number,c.undefined],e[r])}this._merging?Object.assign(this._internals.timeout,e):this._internals.timeout={...e}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){if(d.any([c.string,c.urlInstance],e),e===""){this._internals.prefixUrl="";return}if(e=e.toString(),e.endsWith("/")||(e+="/"),this._internals.prefixUrl&&this._internals.url){let{href:r}=this._internals.url;this._internals.url.href=e+r.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){d.any([c.string,c.buffer,c.nodeStream,c.generator,c.asyncGenerator,Pe,c.undefined],e),c.nodeStream(e)&&d.truthy(e.readable),e!==void 0&&(d.undefined(this._internals.form),d.undefined(this._internals.json)),this._internals.body=e}get form(){return this._internals.form}set form(e){d.any([c.plainObject,c.undefined],e),e!==void 0&&(d.undefined(this._internals.body),d.undefined(this._internals.json)),this._internals.form=e}get json(){return this._internals.json}set json(e){e!==void 0&&(d.undefined(this._internals.body),d.undefined(this._internals.form)),this._internals.json=e}get url(){return this._internals.url}set url(e){if(d.any([c.string,c.urlInstance,c.undefined],e),e===void 0){this._internals.url=void 0;return}if(c.string(e)&&e.startsWith("/"))throw new Error("`url` must not start with a slash");let r=`${this.prefixUrl}${e.toString()}`,n=new URL(r);if(this._internals.url=n,n.protocol==="unix:"&&(n.href=`http://unix${n.pathname}${n.search}`),n.protocol!=="http:"&&n.protocol!=="https:"){let s=new Error(`Unsupported protocol: ${n.protocol}`);throw s.code="ERR_UNSUPPORTED_PROTOCOL",s}if(this._internals.username&&(n.username=this._internals.username,this._internals.username=""),this._internals.password&&(n.password=this._internals.password,this._internals.password=""),this._internals.searchParams&&(n.search=this._internals.searchParams.toString(),this._internals.searchParams=void 0),n.hostname==="unix"){if(!this._internals.enableUnixSockets)throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled");let s=/(?<socketPath>.+?):(?<path>.+)/.exec(`${n.pathname}${n.search}`);if(s?.groups){let{socketPath:o,path:i}=s.groups;this._unixOptions={socketPath:o,path:i,host:""}}else this._unixOptions=void 0;return}this._unixOptions=void 0}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){if(d.any([c.object,c.undefined],e),e===void 0){this._internals.cookieJar=void 0;return}let{setCookie:r,getCookieString:n}=e;d.function_(r),d.function_(n),r.length===4&&n.length===0?(r=(0,ze.promisify)(r.bind(e)),n=(0,ze.promisify)(n.bind(e)),this._internals.cookieJar={setCookie:r,getCookieString:n}):this._internals.cookieJar=e}get signal(){return this._internals.signal}set signal(e){d.object(e),this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){d.boolean(e),this._internals.ignoreInvalidCookies=e}get searchParams(){return this._internals.url?this._internals.url.searchParams:(this._internals.searchParams===void 0&&(this._internals.searchParams=new URLSearchParams),this._internals.searchParams)}set searchParams(e){d.any([c.string,c.object,c.undefined],e);let r=this._internals.url;if(e===void 0){this._internals.searchParams=void 0,r&&(r.search="");return}let n=this.searchParams,s;if(c.string(e))s=new URLSearchParams(e);else if(e instanceof URLSearchParams)s=e;else{Bu(e),s=new URLSearchParams;for(let o in e){let i=e[o];i===null?s.append(o,""):i===void 0?n.delete(o):s.append(o,i)}}if(this._merging){for(let o of s.keys())n.delete(o);for(let[o,i]of s)n.append(o,i)}else r?r.search=n.toString():this._internals.searchParams=n}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){d.any([c.function_,c.undefined],e),this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){d.any([c.object,c.boolean,c.undefined],e),e===!0?this._internals.dnsCache=vu():e===!1?this._internals.dnsCache=void 0:this._internals.dnsCache=e}get context(){return this._internals.context}set context(e){d.object(e),this._merging?Object.assign(this._internals.context,e):this._internals.context={...e}}get hooks(){return this._internals.hooks}set hooks(e){d.object(e);for(let r in e){if(!(r in this._internals.hooks))throw new Error(`Unexpected hook event: ${r}`);let n=r,s=e[n];if(d.any([c.array,c.undefined],s),s)for(let o of s)d.function_(o);if(this._merging)s&&this._internals.hooks[n].push(...s);else{if(!s)throw new Error(`Missing hook event: ${r}`);this._internals.hooks[r]=[...s]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){d.any([c.boolean,c.function_],e),this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){d.number(e),this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){d.any([c.object,c.string,c.boolean,c.undefined],e),e===!0?this._internals.cache=Du:e===!1?this._internals.cache=void 0:this._internals.cache=e}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){d.boolean(e),this._internals.throwHttpErrors=e}get username(){let e=this._internals.url,r=e?e.username:this._internals.username;return decodeURIComponent(r)}set username(e){d.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.username=n:this._internals.username=n}get password(){let e=this._internals.url,r=e?e.password:this._internals.password;return decodeURIComponent(r)}set password(e){d.string(e);let r=this._internals.url,n=encodeURIComponent(e);r?r.password=n:this._internals.password=n}get http2(){return this._internals.http2}set http2(e){d.boolean(e),this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){d.boolean(e),this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){d.plainObject(e),this._merging?Object.assign(this._internals.headers,ue(e)):this._internals.headers=ue(e)}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){d.boolean(e),this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==void 0&&e!==4&&e!==6)throw new TypeError(`Invalid DNS lookup IP version: ${e}`);this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){d.function_(e),this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){d.function_(e),this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){if(d.plainObject(e),d.any([c.function_,c.undefined],e.calculateDelay),d.any([c.number,c.undefined],e.maxRetryAfter),d.any([c.number,c.undefined],e.limit),d.any([c.array,c.undefined],e.methods),d.any([c.array,c.undefined],e.statusCodes),d.any([c.array,c.undefined],e.errorCodes),d.any([c.number,c.undefined],e.noise),e.noise&&Math.abs(e.noise)>100)throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`);for(let n in e)if(!(n in this._internals.retry))throw new Error(`Unexpected retry option: ${n}`);this._merging?Object.assign(this._internals.retry,e):this._internals.retry={...e};let{retry:r}=this._internals;r.methods=[...new Set(r.methods.map(n=>n.toUpperCase()))],r.statusCodes=[...new Set(r.statusCodes)],r.errorCodes=[...new Set(r.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){d.any([c.string,c.undefined],e),this._internals.localAddress=e}get method(){return this._internals.method}set method(e){d.string(e),this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){d.any([c.function_,c.undefined],e),this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){d.plainObject(e),d.any([c.boolean,c.undefined],e.shared),d.any([c.number,c.undefined],e.cacheHeuristic),d.any([c.number,c.undefined],e.immutableMinTimeToLive),d.any([c.boolean,c.undefined],e.ignoreCargoCult);for(let r in e)if(!(r in this._internals.cacheOptions))throw new Error(`Cache option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.cacheOptions,e):this._internals.cacheOptions={...e}}get https(){return this._internals.https}set https(e){d.plainObject(e),d.any([c.boolean,c.undefined],e.rejectUnauthorized),d.any([c.function_,c.undefined],e.checkServerIdentity),d.any([c.string,c.object,c.array,c.undefined],e.certificateAuthority),d.any([c.string,c.object,c.array,c.undefined],e.key),d.any([c.string,c.object,c.array,c.undefined],e.certificate),d.any([c.string,c.undefined],e.passphrase),d.any([c.string,c.buffer,c.array,c.undefined],e.pfx),d.any([c.array,c.undefined],e.alpnProtocols),d.any([c.string,c.undefined],e.ciphers),d.any([c.string,c.buffer,c.undefined],e.dhparam),d.any([c.string,c.undefined],e.signatureAlgorithms),d.any([c.string,c.undefined],e.minVersion),d.any([c.string,c.undefined],e.maxVersion),d.any([c.boolean,c.undefined],e.honorCipherOrder),d.any([c.number,c.undefined],e.tlsSessionLifetime),d.any([c.string,c.undefined],e.ecdhCurve),d.any([c.string,c.buffer,c.array,c.undefined],e.certificateRevocationLists);for(let r in e)if(!(r in this._internals.https))throw new Error(`HTTPS option \`${r}\` does not exist`);this._merging?Object.assign(this._internals.https,e):this._internals.https={...e}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null)throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");d.any([c.string,c.undefined],e),this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){d.boolean(e),this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){d.boolean(e),this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===void 0){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json")throw new Error(`Invalid \`responseType\` option: ${e}`);this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){d.object(e),this._merging?Object.assign(this._internals.pagination,e):this._internals.pagination=e}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){d.boolean(e),this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){d.any([c.number,c.undefined],e),this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){d.boolean(e),this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,r){return(0,ze.inspect)(this._internals,r)}createNativeRequestOptions(){let e=this._internals,r=e.url,n;r.protocol==="https:"?n=e.http2?e.agent:e.agent.https:n=e.agent.http;let{https:s}=e,{pfx:o}=s;return c.array(o)&&c.plainObject(o[0])&&(o=o.map(i=>({buf:i.buffer,passphrase:i.passphrase}))),{...e.cacheOptions,...this._unixOptions,ALPNProtocols:s.alpnProtocols,ca:s.certificateAuthority,cert:s.certificate,key:s.key,passphrase:s.passphrase,pfx:s.pfx,rejectUnauthorized:s.rejectUnauthorized,checkServerIdentity:s.checkServerIdentity??$i.checkServerIdentity,ciphers:s.ciphers,honorCipherOrder:s.honorCipherOrder,minVersion:s.minVersion,maxVersion:s.maxVersion,sigalgs:s.signatureAlgorithms,sessionTimeout:s.tlsSessionLifetime,dhparam:s.dhparam,ecdhCurve:s.ecdhCurve,crl:s.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:n,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?$u(e):void 0,h2session:e.h2session}}getRequestFunction(){let e=this._internals.url,{request:r}=this._internals;return!r&&e?this.getFallbackRequestFunction():r}getFallbackRequestFunction(){let e=this._internals.url;if(e){if(e.protocol==="https:"){if(this._internals.http2){if(zi<15||zi===15&&Uu<10){let r=new Error("To use the `http2` option, install Node.js 15.10.0 or above");throw r.code="EUNSUPPORTED",r}return Gi.default.auto}return Wi.default.request}return Vi.default.request}}freeze(){let e=this._internals;Object.freeze(e),Object.freeze(e.hooks),Object.freeze(e.hooks.afterResponse),Object.freeze(e.hooks.beforeError),Object.freeze(e.hooks.beforeRedirect),Object.freeze(e.hooks.beforeRequest),Object.freeze(e.hooks.beforeRetry),Object.freeze(e.hooks.init),Object.freeze(e.https),Object.freeze(e.cacheOptions),Object.freeze(e.agent),Object.freeze(e.headers),Object.freeze(e.timeout),Object.freeze(e.retry),Object.freeze(e.retry.errorCodes),Object.freeze(e.retry.methods),Object.freeze(e.retry.statusCodes)}};var be=t=>{let{statusCode:e}=t,{followRedirect:r}=t.request.options,s=(typeof r=="function"?r(t):r)?299:399;return e>=200&&e<=s||e===304},we=class extends R{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request),this.name="ParseError",this.code="ERR_BODY_PARSE_FAILURE"}},Vr=(t,e,r,n)=>{let{rawBody:s}=t;try{if(e==="text")return s.toString(n);if(e==="json")return s.length===0?"":r(s.toString(n));if(e==="buffer")return s}catch(o){throw new we(o,t)}throw new we({message:`Unknown body type '${e}'`,name:"Error"},t)};function Wu(t){return t.writable&&!t.writableEnded}var Ji=Wu;function bt(t){return t.protocol==="unix:"||t.hostname==="unix"}var Vu=c.string(Jr.default.versions.brotli),Gu=new Set(["GET","HEAD"]),Gr=new je,Ju=new Set([300,301,302,303,304,307,308]),Ku=["socket","connect","continue","information","upgrade"],_t=()=>{},se=class t extends Ki.Duplex{["constructor"];_noPipe;options;response;requestUrl;redirectUrls;retryCount;_stopRetry;_downloadedSize;_uploadedSize;_stopReading;_pipedServerResponses;_request;_responseSize;_bodySize;_unproxyEvents;_isFromCache;_cannotHaveBody;_triggerRead;_cancelTimeouts;_removeListeners;_nativeResponse;_flushed;_aborted;_requestInitialized;constructor(e,r,n){super({autoDestroy:!1,highWaterMark:0}),this._downloadedSize=0,this._uploadedSize=0,this._stopReading=!1,this._pipedServerResponses=new Set,this._cannotHaveBody=!1,this._unproxyEvents=_t,this._triggerRead=!1,this._cancelTimeouts=_t,this._removeListeners=_t,this._jobs=[],this._flushed=!1,this._requestInitialized=!1,this._aborted=!1,this.redirectUrls=[],this.retryCount=0,this._stopRetry=_t,this.on("pipe",o=>{o?.headers&&Object.assign(this.options.headers,o.headers)}),this.on("newListener",o=>{if(o==="retry"&&this.listenerCount("retry")>0)throw new Error("A retry listener has been attached already.")});try{if(this.options=new B(e,r,n),!this.options.url){if(this.options.prefixUrl==="")throw new TypeError("Missing `url` property");this.options.url=""}this.requestUrl=this.options.url}catch(o){let{options:i}=o;i&&(this.options=i),this.flush=async()=>{this.flush=async()=>{},this.destroy(o)};return}let{body:s}=this.options;if(c.nodeStream(s)&&s.once("error",o=>{this._flushed?this._beforeError(new _e(o,this)):this.flush=async()=>{this.flush=async()=>{},this._beforeError(new _e(o,this))}}),this.options.signal){let o=()=>{this.destroy(new Xe(this))};this.options.signal.aborted?o():(this.options.signal.addEventListener("abort",o),this._removeListeners=()=>{this.options.signal?.removeEventListener("abort",o)})}}async flush(){if(!this._flushed){this._flushed=!0;try{if(await this._finalizeBody(),this.destroyed)return;if(await this._makeRequest(),this.destroyed){this._request?.destroy();return}for(let e of this._jobs)e();this._jobs.length=0,this._requestInitialized=!0}catch(e){this._beforeError(e)}}}_beforeError(e){if(this._stopReading)return;let{response:r,options:n}=this,s=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=!0,e instanceof R||(e=new R(e.message,e,this));let o=e;(async()=>{if(r?.readable&&!r.rawBody&&!this._request?.socket?.destroyed&&(r.setEncoding(this.readableEncoding),await this._setRawBody(r)&&(r.body=r.rawBody.toString())),this.listenerCount("retry")!==0){let i;try{let a;r&&"retry-after"in r.headers&&(a=Number(r.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(r.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3);let h=n.retry;i=await h.calculateDelay({attemptCount:s,retryOptions:h,error:o,retryAfter:a,computedValue:No({attemptCount:s,retryOptions:h,error:o,retryAfter:a,computedValue:h.maxRetryAfter??n.timeout.request??Number.POSITIVE_INFINITY})})}catch(a){this._error(new R(a.message,a,this));return}if(i){if(await new Promise(a=>{let h=setTimeout(a,i);this._stopRetry=()=>{clearTimeout(h),a()}}),this.destroyed)return;try{for(let a of this.options.hooks.beforeRetry)await a(o,this.retryCount+1)}catch(a){this._error(new R(a.message,e,this));return}if(this.destroyed)return;this.destroy(),this.emit("retry",this.retryCount+1,e,a=>{let h=new t(n.url,a,n);return h.retryCount=this.retryCount+1,Jr.default.nextTick(()=>{h.flush()}),h});return}}this._error(o)})()}_read(){this._triggerRead=!0;let{response:e}=this;if(e&&!this._stopReading){e.readableLength&&(this._triggerRead=!1);let r;for(;(r=e.read())!==null;){this._downloadedSize+=r.length;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let s=()=>{this._writeRequest(e,r,n)};this._requestInitialized?s():this._jobs.push(s)}_final(e){let r=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end(n=>{this._request._writableState?.errored||(n||(this._bodySize=this._uploadedSize,this.emit("uploadProgress",this.uploadProgress),this._request.emit("upload-complete")),e(n))})};this._requestInitialized?r():this._jobs.push(r)}_destroy(e,r){if(this._stopReading=!0,this.flush=async()=>{},this._stopRetry(),this._cancelTimeouts(),this._removeListeners(),this.options){let{body:n}=this.options;c.nodeStream(n)&&n.destroy()}this._request&&this._request.destroy(),e!==null&&!c.undefined(e)&&!(e instanceof R)&&(e=new R(e.message,e,this)),r(e)}pipe(e,r){return e instanceof Me.ServerResponse&&this._pipedServerResponses.add(e),super.pipe(e,r)}unpipe(e){return e instanceof Me.ServerResponse&&this._pipedServerResponses.delete(e),super.unpipe(e),this}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!c.undefined(e.form),s=!c.undefined(e.json),o=!c.undefined(e.body),i=Gu.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=i,n||s||o){if(i)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);let a=!c.string(r["content-type"]);if(o){if(Pe(e.body)){let u=new ko(e.body);a&&(r["content-type"]=u.headers["Content-Type"]),"Content-Length"in u.headers&&(r["content-length"]=u.headers["Content-Length"]),e.body=u.encode()}Ie(e.body)&&a&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`)}else if(n){a&&(r["content-type"]="application/x-www-form-urlencoded");let{form:u}=e;e.form=void 0,e.body=new URLSearchParams(u).toString()}else{a&&(r["content-type"]="application/json");let{json:u}=e;e.json=void 0,e.body=e.stringifyJson(u)}let h=await gr(e.body,e.headers);c.undefined(r["content-length"])&&c.undefined(r["transfer-encoding"])&&!i&&!c.undefined(h)&&(r["content-length"]=String(h))}e.responseType==="json"&&!("accept"in e.headers)&&(e.headers.accept="application/json"),this._bodySize=Number(r["content-length"])||void 0}async _onResponseBase(e){if(this.isAborted)return;let{options:r}=this,{url:n}=r;this._nativeResponse=e,r.decompress&&(e=(0,Qi.default)(e));let s=e.statusCode,o=e;o.statusMessage=o.statusMessage??Me.default.STATUS_CODES[s],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirectUrls,o.request=this,o.isFromCache=this._nativeResponse.fromCache??!1,o.ip=this.ip,o.retryCount=this.retryCount,o.ok=be(o),this._isFromCache=o.isFromCache,this._responseSize=Number(e.headers["content-length"])||void 0,this.response=o,e.once("end",()=>{this._responseSize=this._downloadedSize,this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{this._aborted=!0,e.destroy(),this._beforeError(new xe(a,this))}),e.once("aborted",()=>{this._aborted=!0,this._beforeError(new xe({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let i=e.headers["set-cookie"];if(c.object(r.cookieJar)&&i){let a=i.map(async h=>r.cookieJar.setCookie(h,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async h=>{try{await h}catch{}}));try{await Promise.all(a)}catch(h){this._beforeError(h);return}}if(!this.isAborted){if(e.headers.location&&Ju.has(s)&&(typeof r.followRedirect=="function"?r.followRedirect(o):r.followRedirect)){if(e.resume(),this._cancelTimeouts(),this._unproxyEvents(),this.redirectUrls.length>=r.maxRedirects){this._beforeError(new Je(this));return}this._request=void 0;let h=new B(void 0,void 0,this.options),u=s===303&&h.method!=="GET"&&h.method!=="HEAD",m=s!==307&&s!==308,w=h.methodRewriting&&m;(u||w)&&(h.method="GET",h.body=void 0,h.json=void 0,h.form=void 0,delete h.headers["content-length"]);try{let p=xt.Buffer.from(e.headers.location,"binary").toString(),y=new URL(p,n);if(!bt(n)&&bt(y)){this._beforeError(new R("Cannot redirect to UNIX socket",{},this));return}y.hostname!==n.hostname||y.port!==n.port?("host"in h.headers&&delete h.headers.host,"cookie"in h.headers&&delete h.headers.cookie,"authorization"in h.headers&&delete h.headers.authorization,(h.username||h.password)&&(h.username="",h.password="")):(y.username=h.username,y.password=h.password),this.redirectUrls.push(y),h.prefixUrl="",h.url=y;for(let b of h.hooks.beforeRedirect)await b(h,o);this.emit("redirect",h,o),this.options=h,await this._makeRequest()}catch(p){this._beforeError(p);return}return}if(r.isStream&&r.throwHttpErrors&&!be(o)){this._beforeError(new Y(o));return}if(e.on("readable",()=>{this._triggerRead&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this._noPipe){await this._setRawBody()&&this.emit("response",e);return}this.emit("response",e);for(let a of this._pipedServerResponses)if(!a.headersSent){for(let h in e.headers){let u=r.decompress?h!=="content-encoding":!0,m=e.headers[h];u&&a.setHeader(h,m)}a.statusCode=s}}}async _setRawBody(e=this){if(e.readableEnded)return!1;try{let r=await dr(e);if(!this.isAborted)return this.response.rawBody=r,!0}catch{}return!1}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:s}=r;Cs(e),this.options.http2&&e.setTimeout(0),this._cancelTimeouts=br(e,n,s);let o=r.cache?"cacheableResponse":"response";e.once(o,i=>{this._onResponse(i)}),e.once("error",i=>{this._aborted=!0,e.destroy(),i=i instanceof Le?new Qe(i,this.timings,this):new R(i.message,i,this),this._beforeError(i)}),this._unproxyEvents=Ne(e,this,Ku),this._request=e,this.emit("uploadProgress",this.uploadProgress),this._sendBody(),this.emit("request",e)}async _asyncWrite(e){return new Promise((r,n)=>{super.write(e,s=>{if(s){n(s);return}r()})})}_sendBody(){let{body:e}=this.options,r=this.redirectUrls.length===0?this:this._request??this;c.nodeStream(e)?e.pipe(r):c.generator(e)||c.asyncGenerator(e)?(async()=>{try{for await(let n of e)await this._asyncWrite(n);super.end()}catch(n){this._beforeError(n)}})():c.undefined(e)?(this._cannotHaveBody||this._noPipe)&&r.end():(this._writeRequest(e,void 0,()=>{}),r.end())}_prepareCache(e){if(!Gr.has(e)){let r=new no((n,s)=>{let o=n._request(n,s);return c.promise(o)&&(o.once=(i,a)=>{if(i==="error")(async()=>{try{await o}catch(h){a(h)}})();else if(i==="abort")(async()=>{try{(await o).once("abort",a)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${i}`);return o}),o},e);Gr.set(e,r.request())}}async _createCacheableRequest(e,r){return new Promise((n,s)=>{Object.assign(r,_r(e));let o,i=Gr.get(r.cache)(r,async a=>{if(a._readableState.autoDestroy=!1,o){let h=()=>{a.req&&(a.complete=a.req.res.complete)};a.prependOnceListener("end",h),h(),(await o).emit("cacheableResponse",a)}n(a)});i.once("error",s),i.once("request",async a=>{o=a,n(o)})})}async _makeRequest(){let{options:e}=this,{headers:r,username:n,password:s}=e,o=e.cookieJar;for(let u in r)if(c.undefined(r[u]))delete r[u];else if(c.null_(r[u]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${u}\` header`);if(e.decompress&&c.undefined(r["accept-encoding"])&&(r["accept-encoding"]=Vu?"gzip, deflate, br":"gzip, deflate"),n||s){let u=xt.Buffer.from(`${n}:${s}`).toString("base64");r.authorization=`Basic ${u}`}if(o){let u=await o.getCookieString(e.url.toString());c.nonEmptyString(u)&&(r.cookie=u)}e.prefixUrl="";let i;for(let u of e.hooks.beforeRequest){let m=await u(e);if(!c.undefined(m)){i=()=>m;break}}i||=e.getRequestFunction();let a=e.url;this._requestOptions=e.createNativeRequestOptions(),e.cache&&(this._requestOptions._request=i,this._requestOptions.cache=e.cache,this._requestOptions.body=e.body,this._prepareCache(e.cache));let h=e.cache?this._createCacheableRequest:i;try{let u=h(a,this._requestOptions);c.promise(u)&&(u=await u),c.undefined(u)&&(u=e.getFallbackRequestFunction()(a,this._requestOptions),c.promise(u)&&(u=await u)),Ji(u)?this._onRequest(u):this.writable?(this.once("finish",()=>{this._onResponse(u)}),this._sendBody()):this._onResponse(u)}catch(u){throw u instanceof K?new Ke(u,this):u}}async _error(e){try{if(!(e instanceof Y&&!this.options.throwHttpErrors))for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new R(r.message,r,this)}this.destroy(e)}_writeRequest(e,r,n){!this._request||this._request.destroyed||this._request.write(e,r,s=>{if(!s&&!this._request.destroyed){this._uploadedSize+=xt.Buffer.byteLength(e,r);let o=this.uploadProgress;o.percent<1&&this.emit("uploadProgress",o)}n(s)})}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??void 0}get downloadProgress(){let e;return this._responseSize?e=this._downloadedSize/this._responseSize:this._responseSize===this._downloadedSize?e=1:e=0,{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;return this._bodySize?e=this._uploadedSize/this._bodySize:this._bodySize===this._uploadedSize?e=1:e=0,{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}};var Et=class extends R{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};var Qu=["request","response","redirect","uploadProgress","downloadProgress"];function St(t){let e,r,n,s=new Yi.EventEmitter,o=new fe((a,h,u)=>{u(()=>{e.destroy()}),u.shouldReject=!1,u(()=>{h(new Et(e))});let m=w=>{u(()=>{});let p=t??new se(void 0,void 0,n);p.retryCount=w,p._noPipe=!0,e=p,p.once("response",async f=>{let E=(f.headers["content-encoding"]??"").toLowerCase(),g=E==="gzip"||E==="deflate"||E==="br",{options:S}=p;if(g&&!S.decompress)f.body=f.rawBody;else try{f.body=Vr(f,S.responseType,S.parseJson,S.encoding)}catch(_){try{f.body=f.rawBody.toString()}catch(T){p._beforeError(new we(T,f));return}if(be(f)){p._beforeError(_);return}}try{let _=S.hooks.afterResponse;for(let[T,P]of _.entries())if(f=await P(f,async j=>{throw S.merge(j),S.prefixUrl="",j.url&&(S.url=j.url),S.hooks.afterResponse=S.hooks.afterResponse.slice(0,T),new Ye(p)}),!(c.object(f)&&c.number(f.statusCode)&&!c.nullOrUndefined(f.body)))throw new TypeError("The `afterResponse` hook returned an invalid value")}catch(_){p._beforeError(_);return}if(r=f,!be(f)){p._beforeError(new Y(f));return}p.destroy(),a(p.options.resolveBodyOnly?f.body:f)});let y=f=>{if(o.isCanceled)return;let{options:E}=p;if(f instanceof Y&&!E.throwHttpErrors){let{response:g}=f;p.destroy(),a(p.options.resolveBodyOnly?g.body:g);return}h(f)};p.once("error",y);let b=p.options?.body;p.once("retry",(f,E)=>{t=void 0;let g=p.options.body;if(b===g&&c.nodeStream(g)){E.message="Cannot retry with consumed body stream",y(E);return}n=p.options,m(f)}),Ne(p,s,Qu),c.undefined(t)&&p.flush()};m(0)});o.on=(a,h)=>(s.on(a,h),o),o.off=(a,h)=>(s.off(a,h),o);let i=a=>{let h=(async()=>{await o;let{options:u}=r.request;return Vr(r,a,u.parseJson,u.encoding)})();return Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)),h};return o.json=()=>{if(e.options){let{headers:a}=e.options;!e.writableFinished&&!("accept"in a)&&(a.accept="application/json")}return i("json")},o.buffer=()=>i("buffer"),o.text=()=>i("text"),o}var Yu=async t=>new Promise(e=>{setTimeout(e,t)}),Xu=t=>c.function_(t),Zu=["get","post","put","patch","head","delete"],Xi=t=>{t={options:new B(void 0,void 0,t.options),handlers:[...t.handlers],mutableDefaults:t.mutableDefaults},Object.defineProperty(t,"mutableDefaults",{enumerable:!0,configurable:!1,writable:!1});let e=(n,s,o=t.options)=>{let i=new se(n,s,o),a,h=w=>(i.options=w,i._noPipe=!w.isStream,i.flush(),w.isStream?i:(a||=St(i),a)),u=0,m=w=>{let y=(t.handlers[u++]??h)(w,m);if(c.promise(y)&&!i.options.isStream&&(a||=St(i),y!==a)){let b=Object.getOwnPropertyDescriptors(a);for(let f in b)f in y&&delete b[f];Object.defineProperties(y,b),y.cancel=a.cancel}return y};return m(i.options)};e.extend=(...n)=>{let s=new B(void 0,void 0,t.options),o=[...t.handlers],i;for(let a of n)Xu(a)?(s.merge(a.defaults.options),o.push(...a.defaults.handlers),i=a.defaults.mutableDefaults):(s.merge(a),a.handlers&&o.push(...a.handlers),i=a.mutableDefaults);return Xi({options:s,handlers:o,mutableDefaults:!!i})};let r=async function*(n,s){let o=new B(n,s,t.options);o.resolveBodyOnly=!1;let{pagination:i}=o;d.function_(i.transform),d.function_(i.shouldContinue),d.function_(i.filter),d.function_(i.paginate),d.number(i.countLimit),d.number(i.requestLimit),d.number(i.backoff);let a=[],{countLimit:h}=i,u=0;for(;u<i.requestLimit;){u!==0&&await Yu(i.backoff);let m=await e(void 0,void 0,o),w=await i.transform(m),p=[];d.array(w);for(let b of w)if(i.filter({item:b,currentItems:p,allItems:a})&&(!i.shouldContinue({item:b,currentItems:p,allItems:a})||(yield b,i.stackAllItems&&a.push(b),p.push(b),--h<=0)))return;let y=i.paginate({response:m,currentItems:p,allItems:a});if(y===!1)return;y===m.request.options?o=m.request.options:(o.merge(y),d.any([c.urlInstance,c.undefined],y.url),y.url!==void 0&&(o.prefixUrl="",o.url=y.url)),u++}};e.paginate=r,e.paginate.all=async(n,s)=>{let o=[];for await(let i of r(n,s))o.push(i);return o},e.paginate.each=r,e.stream=(n,s)=>e(n,{...s,isStream:!0});for(let n of Zu)e[n]=(s,o)=>e(s,{...o,method:n}),e.stream[n]=(s,o)=>e(s,{...o,method:n,isStream:!0});return t.mutableDefaults||(Object.freeze(t.handlers),t.options.freeze()),Object.defineProperty(e,"defaults",{value:t,writable:!1,configurable:!1,enumerable:!0}),e},Zi=Xi;var ed={options:new B,handlers:[],mutableDefaults:!1},td=Zi(ed),Kr=td;var ea=require("crypto"),I=require("react/jsx-runtime");function ta(t){let{query:e}=t.arguments,r=(0,x.getPreferenceValues)(),[n,s]=(0,D.useState)(""),[o,i]=(0,D.useState)([]),[a,h]=(0,D.useState)(),[u,m]=(0,D.useState)(r.showMetadata),[w,p]=(0,D.useState)(!0),[y,b]=(0,D.useState)(),[f,E]=(0,D.useState)(),g=(0,D.useRef)(!1);function S(k){p(!1),console.error("Streaming error:",k),(0,x.showToast)({style:x.Toast.Style.Failure,title:"Error fetching data",message:k.message})}async function _(){console.log("Streaming Query:",e);let k=Date.now();try{let $=await Kr.stream("https://ask-ai-proxy.raycast-0ef.workers.dev/query/v1/projects/6af273b4-8b7b-4569-b76d-0ba12ccb88bc/chat/stream/",{headers:{"X-UUID":await T(),"content-type":"application/json"},body:JSON.stringify({integration_id:"8daa37bb-c142-4fad-addc-cb189fb7c53d",query:e}),method:"POST"}),W="",Tt="";$.on("data",ra=>{W+=ra.toString();let Qr=W.split("\u241E");W=Qr.pop()||"";for(let Yr of Qr)if(Yr.trim()!=="")try{let v=JSON.parse(Yr);if(v.chunk.type==="partial_answer")Tt=Tt+v.chunk.content.text,s(Tt);else if(v.chunk.type==="relevant_sources"){let Fe=Array.from(new Map(v.chunk.content.relevant_sources.map(z=>[JSON.stringify(z),z])).values());Fe=Fe.filter(z=>z.source_url&&z.source_url.length>5).map(z=>{let At=z.title.split("|");return At=Array.from(new Map(At.map(Xr=>[Xr,Xr])).values()),z.title=At.join(" | "),z}),i(Fe),Fe.forEach(z=>console.log("Relevant source:",z))}else v.chunk.type==="metadata"?h(v.chunk.content.is_uncertain):v.chunk.type==="identifiers"?E(v.chunk.content.question_answer_id):console.log("Unknown chunk:",v.chunk.type)}catch(v){S(v)}}),$.on("end",()=>{p(!1),b(Date.now()-k)}),$.on("error",S)}catch($){S($)}}let T=async()=>{let k=await x.LocalStorage.getItem("user-id");return k||(k=(0,ea.randomUUID)(),await x.LocalStorage.setItem("user-id",k)),k},P=async k=>{let $=await T();try{await Kr.post("https://ask-ai-proxy.raycast-0ef.workers.dev/query/v1/feedback/upsert/",{headers:{"X-UUID":$},json:{user_identifier:$,reaction:k,question_answer:f}}),(0,x.showToast)({title:k==="upvote"?"Upvoted":"Downvoted",message:"Thank you for your feedback!"})}catch(W){S(W)}};(0,D.useEffect)(()=>{g.current||(console.log("Component mounted for the first time"),g.current=!0,_())},[e]);let j=async()=>{m(!u),await(0,x.showToast)({style:x.Toast.Style.Success,title:"Toggled the info panel",message:"Change default in preferences",primaryAction:{title:"Open preferences",shortcut:{modifiers:["cmd"],key:"o"},onAction:k=>{(0,x.openCommandPreferences)(),k.hide()}}})};return(0,I.jsx)(x.Detail,{markdown:n.length>0?n:"Searching for the best answer...",isLoading:w,navigationTitle:t.arguments.query,metadata:u&&(0,I.jsxs)(x.Detail.Metadata,{children:[(0,I.jsx)(x.Detail.Metadata.Label,{title:"Time to Answer",text:y?`${y/1e3}s`:"..."}),(0,I.jsx)(x.Detail.Metadata.Label,{title:"Character Count",text:`${n.length} characters`}),(0,I.jsx)(x.Detail.Metadata.Label,{title:"Word Count",text:`${n.split(/\s+/).filter(k=>k.length>0).length} words`}),a!==void 0&&(0,I.jsx)(x.Detail.Metadata.TagList,{title:"AI Answer Confidence",children:(0,I.jsx)(x.Detail.Metadata.TagList.Item,{text:a?"Low":"High",color:a?"#eed535":"#37a168"})})]}),actions:(0,I.jsxs)(x.ActionPanel,{children:[(0,I.jsx)(x.Action.CopyToClipboard,{title:"Copy answer",content:n}),(0,I.jsx)(x.ActionPanel.Submenu,{title:"Sources considered for response",icon:x.Icon.Globe,shortcut:{modifiers:["cmd"],key:"/"},children:o.map(k=>(0,I.jsx)(x.Action.OpenInBrowser,{title:k.title,url:k.source_url},k.source_url))}),(0,I.jsxs)(x.ActionPanel.Section,{children:[(0,I.jsx)(x.Action,{title:(u?"Hide":"Show")+" info panel",icon:x.Icon.Info,shortcut:{modifiers:["cmd"],key:"i"},onAction:j}),(0,I.jsx)(x.Action,{title:"Open Preferences",onAction:x.openCommandPreferences,shortcut:{modifiers:["cmd","shift"],key:","},icon:x.Icon.Cog})]}),f&&(0,I.jsxs)(x.ActionPanel.Section,{title:"Feedback",children:[(0,I.jsx)(x.Action,{title:"Good answer",onAction:()=>P("upvote"),icon:x.Icon.ThumbsUp}),(0,I.jsx)(x.Action,{title:"Bad answer",onAction:()=>P("downvote"),icon:x.Icon.ThumbsDown})]})]})})}
